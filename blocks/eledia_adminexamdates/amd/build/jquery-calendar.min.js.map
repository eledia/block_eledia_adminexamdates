{"version":3,"file":"jquery-calendar.min.js","sources":["../src/jquery-calendar.js"],"sourcesContent":["/*\n * @class Calendar ~jquery-calendar plugin~ (https://github.com/ArrobeFr/jquery-calendar-bs4)\n * @author Developped by Arrobe (https://www.arrobe.fr)\n * Some Improvements, refactorizations and fixes: M. A. Coma Rivas\n * @license Licensed under MIT (https://github.com/ArrobeFr/jquery-calendar/blob/master/LICENSE)\n */\n\njQuery(document).ready(function($) {\n\n  function Calendar(element, Args) {\n    // Check Moment.js dependency\n    if (typeof (moment) !== 'function') {\n      console.error('Calendar require Moment.js !');\n      return;\n    }\n\n    // Pre-defined events colors\n    var eventColors = [ // https://www.materialui.co/colors (800)\n      '#C62828', // Red\n      '#AD1457', // Pink\n      '#6A1B9A', // Purple\n      '#4527A0', // Deep Purple\n      '#283593', // Indigo\n      '#1565C0', // Blue\n      '#0277BD', // Light Blue\n      '#00838F', // Cyan\n      '#00695C', // Teal\n      '#2E7D32', // Green\n      '#558B2F', // Light Green\n      '#9E9D24', // Lime\n      '#F9A825', // Yellow\n      '#FF8F00', // Amber\n      '#EF6C00', // Orange\n      '#D84315', // Deep Orange\n      '#4E342E', // Brown\n      '#424242', // Grey\n      '#37474F', // Blue Grey\n      '#212121', // Grey (900)\n    ];\n\n    // Pre-defined events colors\n    var daynoteColors = [ // https://www.materialui.co/colors (800)\n      '#EF9A9A', // Red\n      '#F48FB1', // Pink\n      '#CE93D8', // Purple\n      '#B39DDB', // Deep Purple\n      '#9FA8DA', // Indigo\n      '#90CAF9', // Blue\n      '#81D4FA', // Light Blue\n      '#80DEEA', // Cyan\n      '#80CBC4', // Teal\n      '#A5D6A7', // Green\n      '#C5E1A5', // Light Green\n      '#E6EE9C', // Lime\n      '#FFF59D', // Yellow\n      '#FFE082', // Amber\n      '#FFCC80', // Orange\n      '#FFAB91', // Deep Orange\n      '#BCAAA4', // Brown\n      '#EEEEEE', // Grey\n      '#B0BEC5' // Blue Grey\n    ];\n\n    // Define default configuration\n    this.conf = {\n      locale: (Args.locale) ? Args.locale : 'fr',\n      view: 'week',\n      rooms: (Args.rooms !== false) ? Args.rooms : false,\n      enableKeyboard: (Args.enableKeyboard) ? Args.enableKeyboard : true,\n      defaultView: {\n        largeScreen: (Args.defaultView) ? (Args.defaultView.largeScreen) ? (Args.defaultView.largeScreen) : 'week' : 'week',\n        smallScreen: (Args.defaultView) ? (Args.defaultView.smallScreen) ? (Args.defaultView.smallScreen) : 'day' : 'day',\n        smallScreenThreshold: (Args.defaultView) ? (Args.defaultView.smallScreenThreshold) ? (Args.defaultView.smallScreenThreshold) : 1000 : 1000\n      },\n      weekday: {\n        timeline: {\n          fromHour: (Args.weekday) ? (Args.weekday.timeline) ? (Args.weekday.timeline.fromHour) ? Args.weekday.timeline.fromHour : 7 : 7 : 7,\n          toHour: (Args.weekday) ? (Args.weekday.timeline) ? (Args.weekday.timeline.toHour) ? Args.weekday.timeline.toHour : 20 : 20 : 20,\n          intervalMinutes: (Args.weekday) ? (Args.weekday.timeline) ? (Args.weekday.timeline.intervalMinutes) ? Args.weekday.timeline.intervalMinutes : 60 : 60 : 60,\n          format: (Args.weekday) ? (Args.weekday.timeline) ? (Args.weekday.timeline.format) ? Args.weekday.timeline.format : 'HH:mm' : 'HH:mm' : 'HH:mm',\n          heightPx: (Args.weekday) ? (Args.weekday.timeline) ? (Args.weekday.timeline.heightPx) ? Args.weekday.timeline.heightPx : 50 : 50 : 50,\n          autoResize: (Args.weekday) ? (Args.weekday.timeline) ? (Args.weekday.timeline.autoResize !== undefined) ? Args.weekday.timeline.autoResize : true : true : true\n        },\n        dayline: {\n          weekdays: (Args.weekday) ? (Args.weekday.dayline) ? (Args.weekday.dayline.weekdays) ? Args.weekday.dayline.weekdays : [0, 1, 2, 3, 4, 5, 6] : [0, 1, 2, 3, 4, 5, 6] : [0, 1, 2, 3, 4, 5, 6],\n          format: (Args.weekday) ? (Args.weekday.dayline) ? (Args.weekday.dayline.format) ? Args.weekday.dayline.format : 'dddd DD/MM' : 'dddd DD/MM' : 'dddd DD/MM',\n          heightPx: (Args.weekday) ? (Args.weekday.dayline) ? (Args.weekday.dayline.heightPx) ? Args.weekday.dayline.heightPx ? (Args.weekday.dayline.heightPx > 31) ? Args.weekday.dayline.heightPx : 31 : 31 : 31 : 31 : 31,\n          month: {\n            format: (Args.weekday) ? (Args.weekday.dayline) ? (Args.weekday.dayline.month) ? (Args.weekday.dayline.month.format) ? Args.weekday.dayline.month.format : 'MMMM YYYY' : 'MMMM YYYY' : 'MMMM YYYY' : 'MMMM YYYY',\n            heightPx: (Args.weekday) ? (Args.weekday.dayline) ? (Args.weekday.dayline.month) ? (Args.weekday.dayline.month.heightPx) ? Args.weekday.dayline.month.heightPx : 30 : 30 : 30 : 30,\n            weekFormat: (Args.weekday) ? (Args.weekday.dayline) ? (Args.weekday.dayline.month) ? (Args.weekday.dayline.month.weekFormat) ? Args.weekday.dayline.month.weekFormat : 'w' : 'w' : 'w' : 'w'\n          }\n        }\n      },\n      month: {\n        format: (Args.month) ? (Args.month.format) ? Args.month.format : 'MMMM YYYY' : 'MMMM YYYY',\n        heightPx: (Args.month) ? (Args.month.heightPx) ? (Args.month.heightPx > 31) ? Args.month.heightPx : 31 : 31 : 31,\n        weekline: {\n          format: (Args.month) ? (Args.month.weekline) ? (Args.month.weekline.format) ? Args.month.weekline.format : 'w' : 'w' : 'w',\n          heightPx: (Args.month) ? (Args.month.weekline) ? (Args.month.weekline.heightPx) ? Args.month.weekline.heightPx : 80 : 80 : 80\n        },\n        dayheader: {\n          weekdays: (Args.month) ? (Args.month.dayheader) ? (Args.month.dayheader.weekdays) ? Args.month.dayheader.weekdays : [0, 1, 2, 3, 4, 5, 6] : [0, 1, 2, 3, 4, 5, 6] : [0, 1, 2, 3, 4, 5, 6],\n          format: (Args.month) ? (Args.month.dayheader) ? (Args.month.dayheader.format) ? Args.month.dayheader.format : 'dddd' : 'dddd' : 'dddd',\n          heightPx: (Args.month) ? (Args.month.dayheader) ? (Args.month.dayheader.heightPx) ? Args.month.dayheader.heightPx : 30 : 30 : 30\n        },\n        day: {\n          format: (Args.month) ? (Args.month.day) ? (Args.month.day.format) ? Args.month.day.format : 'DD/MM' : 'DD/MM' : 'DD/MM'\n        }\n      },\n      unixTimestamp: (Args.unixTimestamp) ? Args.unixTimestamp : moment().format('X'),\n      event: {\n        hover: {\n          delay: (Args.event) ? (Args.event.hover) ? (Args.event.hover.delay) ? Args.event.hover.delay : 500 : 500 : 500\n        }\n      },\n      colors: {\n        events: (Args.colors) ? (Args.colors.events) ? Args.colors.events : eventColors : eventColors,\n        daynotes: (Args.colors) ? (Args.colors.daynotes) ? Args.colors.daynotes : daynoteColors : daynoteColors,\n        random: (Args.colors) ? (Args.colors.random) ? Args.colors.random : true : true\n      },\n      categories: {\n        enable: (Args.categories) ? (Args.categories.enable !== undefined) ? Args.categories.enable : true : true,\n        hover: {\n          delay: (Args.categories) ? (Args.categories.hover) ? (Args.categories.hover.delay) ? Args.categories.hover.delay : 500 : 500 : 500\n        }\n      },\n      now: {\n        enable: (Args.now) ? (Args.now.enable !== undefined) ? (Args.now.enable) : false : false,\n        refresh: (Args.now) ? (Args.now.refresh !== undefined) ? (Args.now.refresh) : false : false,\n        heightPx: (Args.now) ? (Args.now.heightPx) ? (Args.now.heightPx) : 1 : 1,\n        style: (Args.now) ? (Args.now.style) ? (Args.now.style) : 'solid' : 'solid',\n        color: (Args.now) ? (Args.now.color) ? (Args.now.color) : '#03A9F4' : '#03A9F4'\n      }\n    };\n\n    // Sets moment's locale\n    moment.locale(this.conf.locale);\n\n    // Sets colors\n    this.setEventColors(this.conf.colors.events);\n    this.setDaynoteColors(this.conf.colors.daynotes);\n\n    // Create array to associate colors and categories\n    this.eventCategoryColor = [];\n    this.daynoteCategoryColor = [];\n\n    // Create array to associate colors and categories as defined by setEventCategoriesColors or setDaynoteCategoriesColors\n    this.userEventCategoryColor = [];\n    this.userDaynoteCategoryColor = [];\n\n    // Load events\n    this.setEvents((Args.events) ? Args.events : []);\n\n    // Load day notes\n    this.setDaynotes((Args.daynotes) ? Args.daynotes : []);\n\n    // Define the default view\n    if (this.mobileQuery() == 'mobile') {\n      this.setView(this.conf.defaultView.smallScreen);\n    } else {\n      this.setView(this.conf.defaultView.largeScreen);\n    }\n\n    // Init\n    this.element = element;\n    this.initTime = false;\n  }\n\n  Calendar.prototype.init = function() {\n    var millis = Date.now();\n    this.element.addClass('loading');\n    this.calculateCurrentInterval();\n    $(this.element).trigger('Calendar.init', [\n      this,\n      this.getPrevViewInterval(),\n      this.getViewInterval(),\n      this.getNextViewInterval()\n    ]);\n    $(this.element).html('');\n    if (!$(this.element).hasClass('calendar')) {\n      $(this.element).addClass('calendar');\n    }\n    if (this.getView() == 'day' || this.getView() == 'week') {\n      if (this.conf.weekday.timeline.autoResize) {\n        this.resizeTimeline();\n      }\n    }\n    this.drawCategories();\n    if (this.getView() == 'day' || this.getView() == 'week') {\n      this.weekDrawTime();\n      this.weekDrawDays();\n      this.weekDrawDaynotes();\n      this.weekDrawEvents();\n    }\n    if (this.getView() == 'month') {\n      this.monthDrawWeek();\n      this.monthDrawWeekNumbers();\n      this.monthDrawWeekDays();\n      this.monthDrawDaynotes();\n      this.monthDrawEvents();\n    }\n    this.drawModal();\n    this.drawNow();\n    this.positionEvents();\n    this.hoverEventOrDaynote();\n    this.clickEventOrDaynote();\n    this.addBtnLeftRight();\n    this.addSwipe();\n    this.clickSwitchView();\n    this.keyboardSwitchView();\n    this.defaultEvents();\n    this.element.removeClass('loading');\n    this.initTime = (Date.now() - millis) + 'ms';\n  };\n\n  Calendar.prototype.defaultEvents = function() {\n    if (this.binded == true) {\n      return;\n    }\n    var self = this;\n    var eventMouseenterDefault = function(event, self, elem) {\n      if (!event.isDefaultPrevented()) {\n        if (parseInt(elem.css('top')) >= (elem.closest('ul').height() / 2) - self.conf.weekday.timeline.heightPx) {\n          var heightPx = parseInt(elem.css('top')) + parseInt(elem.css('height'));\n          elem\n            .css('z-index', 10)\n            .animate({\n              height: heightPx,\n              top: 0,\n              width: '100%',\n              left: 0\n            }, 50)\n          ;\n        } else {\n          var heightPx = elem.closest('ul').height() - parseInt(elem.css('top'));\n          elem\n            .css('z-index', 10)\n            .animate({\n              height: heightPx,\n              width: '100%',\n              left: 0\n            }, 50)\n          ;\n        }\n        elem.find('.event-name').removeClass('invisible');\n        elem.find('.event-content').removeClass('invisible');\n      }\n    };\n    $(self.element).off('Calendar.event-mouseenter', eventMouseenterDefault).on('Calendar.event-mouseenter', eventMouseenterDefault);\n    $(self.element).off('Calendar.daynote-mouseenter', eventMouseenterDefault).on('Calendar.daynote-mouseenter', eventMouseenterDefault);\n\n    var eventMouseleaveDefault = function(event, self, elem) {\n      if (!event.isDefaultPrevented()) {\n        elem\n          .css('z-index', 'auto')\n          .animate({\n            height: parseFloat(elem.attr('data-height')) + 'px',\n            top: parseFloat(elem.attr('data-top')),\n            width: parseFloat(elem.attr('data-width')) + '%',\n            left: parseFloat(elem.attr('data-left')) + '%'\n          }, 50)\n        ;\n        elem.find('.event-content').addClass('invisible');\n      }\n    };\n    $(self.element).off('Calendar.event-mouseleave', eventMouseleaveDefault).on('Calendar.event-mouseleave', eventMouseleaveDefault);\n    $(self.element).off('Calendar.daynote-mouseleave', eventMouseleaveDefault).on('Calendar.daynote-mouseleave', eventMouseleaveDefault);\n\n    var eventClickDefault = function(event, self, elem, evt) {\n      if (!event.isDefaultPrevented()) {\n        var modal = $(self.element).find('#calendar-modal');\n        var rgb = self.hexToRgb(elem.attr('data-color'));\n        modal.css('background', 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', 0.5)');\n        modal.find('.modal-title').append(elem.attr('data-title') + ' ');\n        modal.find('.modal-body').append(\n          $('<h4>').append(\n            $(this).closest('.calendar-events-day').find('span').html()\n          ).append(\n            ' '\n          ).append(\n            $('<small>').text(elem.find('.event-date').text())\n          )\n        );\n        modal.find('.modal-body').append(elem.find('.event-content').html());\n        modal.modal('show');\n        modal.on('hidden.bs.modal', function(e) {\n          $(e.target).find('.modal-title').html('');\n          $(e.target).find('.modal-body').html('');\n        });\n      }\n    };\n    $(self.element).off('Calendar.event-click', eventClickDefault).on('Calendar.event-click', eventClickDefault);\n    $(self.element).off('Calendar.daynote-click', eventClickDefault).on('Calendar.daynote-click', eventClickDefault);\n\n    var eventCategoryClickDefault = function(event, self, elem) {\n      if (!event.isDefaultPrevented()) {\n        var events = self.element.find('.calendar-event[data-category=\"' + $(elem).text() + '\"]');\n        if ($(elem).attr('data-clicked') == 'false') {\n          events.animate({\n            opacity: 0\n          }, 200, function() {\n            events.css('display', 'none');\n            $(elem).css('background-color', '#E0E0E0');\n            $(elem).attr('data-clicked', true);\n          });\n        }\n        if ($(elem).attr('data-clicked') == 'true') {\n          events.css('display', 'list-item');\n          $(elem).css('background-color', $(elem).attr('data-color'));\n          events.animate({\n            opacity: 1\n          }, 200, function() {\n            $(elem).attr('data-clicked', false);\n          });\n        }\n      }\n    };\n    $(self.element).off('Calendar.category-event-click', eventCategoryClickDefault).on('Calendar.category-event-click', eventCategoryClickDefault);\n    $(self.element).off('Calendar.category-daynote-click', eventCategoryClickDefault).on('Calendar.category-daynote-click', eventCategoryClickDefault);\n\n    var eventCategoryMouseenterDefault = function(event, self, elem) {\n      if (!event.isDefaultPrevented()) {\n        self.element.find('.calendar-event').each(function(i, e) {\n          if ($(e).attr('data-category') != elem.text()) {\n            $(e).css('opacity', 0.2);\n          }\n        });\n      }\n    };\n    $(self.element).off('Calendar.category-event-mouseenter', eventCategoryMouseenterDefault).on('Calendar.category-event-mouseenter', eventCategoryMouseenterDefault);\n    $(self.element).off('Calendar.category-daynote-mouseenter', eventCategoryMouseenterDefault).on('Calendar.category-daynote-mouseenter', eventCategoryMouseenterDefault);\n\n    var eventCategoryMouseleaveDefault = function(event, self, elem) {\n      if (!event.isDefaultPrevented()) {\n        self.element.find('.calendar-event').each(function(i, e) {\n          $(e).css('opacity', 1);\n        });\n      }\n    };\n    $(self.element).off('Calendar.category-event-mouseleave', eventCategoryMouseleaveDefault).on('Calendar.category-event-mouseleave', eventCategoryMouseleaveDefault);\n    $(self.element).off('Calendar.category-daynote-mouseleave', eventCategoryMouseleaveDefault).on('Calendar.category-daynote-mouseleave', eventCategoryMouseleaveDefault);\n\n    this.binded = true;\n  };\n\n  Calendar.prototype.weekDrawTime = function() {\n    $(this.element).append($('<div>', {\n      \"class\": 'calendar-timeline'\n    }));\n    $(this.element).find('div.calendar-timeline').css('padding-top', this.conf.weekday.dayline.heightPx + 'px');\n    var marginTop = this.conf.weekday.dayline.month.heightPx;\n    if (this.conf.categories.enable) {\n      var $categoryBar = $(this.element).find('div.calendar-categories');\n      marginTop += $categoryBar.height() + parseFloat($categoryBar.css('margin-bottom'));\n    }\n    $(this.element).find('div.calendar-timeline').css('margin-top', marginTop + 'px');\n\n    $(this.element).find('div.calendar-timeline').append($('<ul>'));\n\n    var li,\nul = $(this.element).find('div.calendar-timeline').find('ul');\n\n    var time = moment(moment()).startOf('Week');\n    time.add(this.conf.weekday.timeline.fromHour, 'H');\n\n    var limit = (((this.conf.weekday.timeline.toHour + 1) * 60) - (this.conf.weekday.timeline.fromHour * 60)) / this.conf.weekday.timeline.intervalMinutes;\n    var i = 0;\n    while (i < limit) {\n      li = $('<li>');\n      li.append($('<span>').text(time.format(this.conf.weekday.timeline.format)));\n      li.height(this.conf.weekday.timeline.heightPx);\n      ul.append(li);\n      time.add(this.conf.weekday.timeline.intervalMinutes, 'm');\n      i++;\n    }\n  };\n\n  Calendar.prototype.weekDrawDays = function() {\n    $(this.element).append($('<div>', {\n      \"class\": 'calendar-events'\n    }));\n\n    var div = $('<div>', {\n      \"class\": 'calendar-month'\n    })\n      .css('height', this.conf.weekday.dayline.month.heightPx + 'px')\n      .css('text-align', 'center')\n      .css('padding-top', (this.conf.weekday.dayline.month.heightPx - 20) / 2 + 'px')\n    ;\n    if (this.getView() == 'week') {\n      div.text(this.miscUcfirstString(moment.unix(this.conf.unixTimestamp).format(this.conf.weekday.dayline.month.format)));\n      div.addClass('weektomonth');\n    }\n    if (this.getView() == 'day') {\n      div.text(this.miscUcfirstString(moment.unix(this.conf.unixTimestamp).format(this.conf.weekday.dayline.month.weekFormat)));\n      div.addClass('daytoweek');\n    }\n    $(this.element).find('div.calendar-events').append(div);\n\n    $(this.element).find('div.calendar-events').append($('<ul>'));\n\n    var li,\nul = $(this.element).find('div.calendar-events').find('ul');\n\n    var days = this.getViewDays();\n\n    for (var i = 0; i < days.length; i++) {\n      time = moment.unix(days[i]);\n\n      li = $('<li>', {\n        \"class\": 'calendar-events-day'\n      });\n      li.css('width', 100 / days.length + '%');\n      div = $('<div>', {\n        \"class\": 'calendar-day-header'\n      });\n      div.height(this.conf.weekday.dayline.heightPx);\n      if (i == 0 && this.mobileQuery() == 'desktop') {\n        div.append($('<button>', {\n          \"class\": 'btn btn-sm btn-light btn-move-calendar'\n        }).attr('data-direction', 'left').append($('<i>', {\n          \"class\": 'fas fa-arrow-left'\n        })));\n      }\n      div.append($('<span>')\n        .addClass('weektoday')\n        .css('width', '100%')\n        .html(this.miscUcfirstString(time.format(this.conf.weekday.dayline.format)))\n      );\n\n      if (i == days.length - 1 && this.mobileQuery() == 'desktop') {\n        div.append($('<button>', {\n          \"class\": 'btn btn-sm btn-light btn-move-calendar'\n        }).attr('data-direction', 'right').append($('<i>', {\n          \"class\": 'fas fa-arrow-right'\n        })));\n      }\n      li.append(div);\n      li.attr('data-time', time.startOf('day').format('X'));\n      li.append($('<ul>'));\n      li.find('ul').height(((60 / this.conf.weekday.timeline.intervalMinutes) * (this.conf.weekday.timeline.toHour - this.conf.weekday.timeline.fromHour) * this.conf.weekday.timeline.heightPx) + ((60 / this.conf.weekday.timeline.intervalMinutes) * this.conf.weekday.timeline.heightPx));\n      ul.append(li);\n    }\n\n    var maxHeight = 0;\n    $(this.element).find('.calendar-day-header').each(function() {\n      if ($(this).height() > maxHeight) {\n        maxHeight = $(this).height();\n      }\n    });\n    $(this.element).find('.calendar-day-header').each(function() {\n      $(this).height(maxHeight);\n    });\n\n    if (this.conf.weekday.dayline.heightPx < maxHeight) {\n      this.conf.weekday.dayline.heightPx = maxHeight;\n      $(this.element).find('div.calendar-timeline').css('padding-top', this.conf.weekday.dayline.heightPx + 'px'); // W: Padding-top do cabeçalho dos dias da semana\n      // alert(this.conf.weekday.dayline.heightPx + \" \" + $(this.element).find('.calendar-day-header').first().css('height'));\n    }\n\n  };\n\n  Calendar.prototype.monthDrawWeek = function() {\n    $(this.element).append($('<div>', {\n      \"class\": 'calendar-events'\n    }));\n    var div = $('<div>', {\n      \"class\": 'calendar-month'\n    });\n    div.css('height', this.conf.month.heightPx + 'px');\n\n    if (this.mobileQuery() == 'desktop') {\n      div.append($('<button>', {\n        \"class\": 'btn btn-sm btn-light btn-move-calendar'\n      })\n        .attr('data-direction', 'left')\n        .append($('<i>', {\n          \"class\": 'fas fa-angle-left'\n        }))\n      );\n    }\n    div.append($('<span>')\n      .css('position', 'absolute')\n      .css('top', this.conf.month.heightPx / 2 + 'px')\n      .css('right', '50%')\n      .css('transform', 'translate(50%,-50%)')\n      .text(this.miscUcfirstString(moment.unix(this.conf.unixTimestamp).format(this.conf.month.format)))\n    );\n    if (this.mobileQuery() == 'desktop') {\n      div.append($('<button>', {\n        \"class\": 'btn btn-sm btn-light btn-move-calendar'\n      })\n        .css('float', 'right')\n        .attr('data-direction', 'right')\n        .append($('<i>', {\n          \"class\": 'fas fa-arrow-right'\n        }))\n      );\n    }\n\n    $(this.element).find('div.calendar-events').append(div);\n    $(this.element).find('div.calendar-events').append($('<ul>'));\n\n    var li,\nul = $(this.element).find('div.calendar-events').find('ul');\n\n    var time = moment.unix(this.conf.unixTimestamp).startOf('month');\n    var month = parseInt(time.format('MM'));\n    var week = parseInt(time.format('w'));\n    var nbWeeks = 0;\n    while (parseInt(time.format('MM')) == month) {\n      nbWeeks++;\n      while (parseInt(time.format('w')) == week) {\n        time.add(1, 'days');\n      }\n      week = parseInt(time.format('w'));\n    }\n\n    for (var i = 0; i < this.conf.month.dayheader.weekdays.length; i++) {\n      time = moment().startOf('week').add(this.conf.month.dayheader.weekdays[i], 'days');\n      li = $('<li>', {\n        \"class\": 'calendar-month-day-header'\n      });\n      li.append($('<div>')\n        .css('height', this.conf.month.dayheader.heightPx + 'px')\n        .css('padding-top', (this.conf.month.dayheader.heightPx - 20) / 2 + 'px')\n        .text(this.miscUcfirstString(time.format(this.conf.month.dayheader.format)))\n      );\n      li.css('width', 100 / this.conf.month.dayheader.weekdays.length + '%');\n      li.append($('<ul>').css('height', nbWeeks * this.conf.month.weekline.heightPx + 'px'));\n      ul.append(li);\n    }\n    var maxHeight = 0;\n    $(this.element).find('.calendar-month-day-header').each(function() {\n      var e = $(this).find('div');\n      if ($(e).height() > maxHeight) {\n        maxHeight = $(e).height();\n      }\n    });\n    $(this.element).find('.calendar-month-day-header').each(function() {\n      var e = $(this).find('div');\n      $(e).height(maxHeight);\n    });\n  };\n\n  Calendar.prototype.monthDrawWeekNumbers = function() {\n    $(this.element).append($('<div>', {\n      \"class\": 'calendar-timeline'\n    }));\n    var marginTop = this.conf.month.dayheader.heightPx;\n    marginTop += this.conf.month.heightPx;\n    if (this.conf.categories.enable) {\n      marginTop += 30;\n    }\n    marginTop += 2;\n    $(this.element).find('div.calendar-timeline').css('margin-top', marginTop + 'px');\n    $(this.element).find('div.calendar-timeline').append($('<ul>'));\n\n    var li,\nul = $(this.element).find('div.calendar-timeline').find('ul');\n\n    var time = moment.unix(this.conf.unixTimestamp).startOf('month');\n    var month = parseInt(time.format('MM'));\n    var week = parseInt(time.format('w'));\n    while (parseInt(time.format('MM')) == month) {\n      li = $('<li>', {\n        \"class\": 'monthtoweek'\n      });\n      li.append($('<span>')\n        .attr('data-timestamp', time.format('X'))\n        .text(time.format(this.conf.month.weekline.format)).css('margin-top', this.conf.month.weekline.heightPx / 2 + 'px')\n      );\n      li.height(this.conf.month.weekline.heightPx);\n      ul.append(li);\n      while (parseInt(time.format('w')) == week) {\n        time.add(1, 'days');\n      }\n      week = parseInt(time.format('w'));\n    }\n  };\n\n  Calendar.prototype.monthDrawWeekDays = function() {\n    var days = this.getViewDays(),\ntargetUl, li;\n\n    var i = parseInt(moment.unix(days[0]).weekday());\n    var time = moment.unix(days[0]);\n    while (i > 0) {\n      time = time.subtract(1, 'days');\n      targetUl = this.element.find(\".calendar-events>ul>.calendar-month-day-header>div:contains('\" + this.miscUcfirstString(time.format(this.conf.month.dayheader.format)) + \"')\").parent().find('ul');\n      li = $('<li>');\n      li.css('height', this.conf.month.weekline.heightPx + 'px');\n      $(targetUl).append(li);\n      i--;\n    }\n\n    time = days.length;\n    for (i = 0; i < time; i++) {\n      targetUl = this.element.find(\".calendar-events>ul>.calendar-month-day-header>div:contains('\" + this.miscUcfirstString(moment.unix(days[i]).format(this.conf.month.dayheader.format)) + \"')\").parent().find('ul');\n      li = $('<li>', {\n        \"class\": 'calendar-month-events-day'\n      });\n      li.css('height', this.conf.month.weekline.heightPx + 'px');\n      li.attr('data-time-from', moment.unix(days[i]).startOf('day').format('X'));\n      li.attr('data-time-to', moment.unix(days[i]).endOf('day').format('X'));\n      li.append($('<span>').text(moment.unix(days[i]).format(this.conf.month.day.format)));\n      $(targetUl).append(li);\n    }\n\n    this.element.find('.calendar-month-events-day').each(function() {\n      $(this).append($('<ul>'));\n    });\n  };\n\n  Calendar.prototype.drawCategories = function() {\n    this.determineEventsCategories();\n    this.determineDaynotesCategories();\n\n    if (this.conf.categories.enable) {\n      var label,\ndiv = $('<div>', {\n        \"class\": 'calendar-categories'\n      }).css('height', '26px');\n      for (var i = 0; i < this.eventCategoryColor.length; i++) {\n        label = $('<span>', {\n          \"class\": 'badge badge-default calendar-label'\n        });\n        label.css('margin-right', '5px');\n        label.css('background-color', this.eventCategoryColor[i].color);\n        label.css('cursor', 'pointer');\n        label.attr('data-color', this.eventCategoryColor[i].color);\n        label.attr('data-clicked', false);\n        label.text(this.eventCategoryColor[i].category);\n        div.append(label);\n      }\n      for (i = 0; i < this.daynoteCategoryColor.length; i++) {\n        label = $('<span>', {\n          \"class\": 'badge badge-default calendar-label calendar-label-daynote'\n        });\n        label.css('margin-right', '5px');\n        label.css('background-color', this.daynoteCategoryColor[i].color);\n        label.css('cursor', 'pointer');\n        label.attr('data-color', this.daynoteCategoryColor[i].color);\n        label.attr('data-clicked', false);\n        label.text(this.daynoteCategoryColor[i].category);\n        div.append(label);\n      }\n      this.element.prepend(div);\n      this.hoverCategory();\n      this.clickCategory();\n    }\n  };\n\n  Calendar.prototype.hoverCategory = function() {\n    var setTimeoutConst, elem,\nself = this;\n    this.element.find('.calendar-label').hover(\n      function() {\n        elem = $(this);\n        setTimeoutConst = setTimeout(function() {\n          if (elem.hasClass('calendar-label-daynote')) {\n            $(self.element).trigger('Calendar.category-daynote-mouseenter', [\n              self,\n              elem\n            ]);\n          } else {\n            $(self.element).trigger('Calendar.category-event-mouseenter', [\n              self,\n              elem\n            ]);\n          }\n        }, self.conf.categories.hover.delay);\n      },\n      function() {\n        clearTimeout(setTimeoutConst);\n        elem = $(this);\n        if (elem.hasClass('calendar-label-daynote')) {\n          $(self.element).trigger('Calendar.category-daynote-mouseleave', [\n            self,\n            elem\n          ]);\n        } else {\n          $(self.element).trigger('Calendar.category-event-mouseleave', [\n            self,\n            elem\n          ]);\n        }\n      }\n    );\n  };\n\n  Calendar.prototype.clickCategory = function() {\n    var elem,\nself = this;\n    this.element.find('.calendar-label').click(function(event) {\n      if ($(event.target).hasClass('calendar-label-daynote')) {\n        $(self.element).trigger('Calendar.category-daynote-click', [\n          self,\n          elem\n        ]);\n      } else {\n        $(self.element).trigger('Calendar.category-event-click', [\n          self,\n          elem\n        ]);\n      }\n    });\n  };\n\n  Calendar.prototype.positionEvents = function() {\n    switch (this.getView()) {\n      case 'day':\n      case 'week':\n        this.positionEventsInWeek();\n        break;\n\n      case 'month':\n        this.positionEventsInMonth();\n        break;\n    }\n  };\n\n  Calendar.prototype.positionEventsInWeek = function() {\n    var self = this;\n    var zeroLast = 0;\n    this.element.find('.calendar-event').each(function(i) {\n      // Place each event in the grid -> need to set top position and height\n      var start = parseInt($(this).attr('data-start'));\n      var end = parseInt($(this).attr('data-end'));\n      var duration = end - start;\n      var zero = parseInt($(this).closest('li.calendar-events-day').attr('data-time')) + (self.conf.weekday.timeline.fromHour * 60 * 60);\n      if (zero > zeroLast) {\n        zeroLast = zero;\n      }\n      var eventTop = ((start - zero) / 60 / self.conf.weekday.timeline.intervalMinutes * self.conf.weekday.timeline.heightPx) - 1;\n      var eventHeight = (duration / 60 / self.conf.weekday.timeline.intervalMinutes * self.conf.weekday.timeline.heightPx) + 1;\n\n      var endsOnCurrent = 0;\n      var nbEventNotOnCurrent = false;\n      var nbEventOnCurrent = 0;\n      var tmp = [];\n      var currentElement = $(this);\n      $(this).closest('ul').find('li.calendar-event').each(function(j, e) {\n        if ($(e)[0] != currentElement[0]) {\n          if (parseInt(currentElement.attr('data-start')) < parseInt($(e).attr('data-end')) && parseInt(currentElement.attr('data-end')) > parseInt($(e).attr('data-start'))) {\n            tmp.push($(e));\n            nbEventOnCurrent++;\n          }\n          if (parseInt(currentElement.attr('data-start')) < parseInt($(e).attr('data-end')) && parseInt(currentElement.attr('data-end')) > parseInt($(e).attr('data-end'))) {\n            endsOnCurrent++;\n          } else if (parseInt(currentElement.attr('data-start')) == parseInt($(e).attr('data-start')) && parseInt($(e).attr('data-index')) < parseInt(currentElement.attr('data-index'))) {\n            endsOnCurrent++;\n          }\n        }\n      });\n\n      var dates = [];\n      dates.push(parseInt(currentElement.attr('data-start')));\n      dates.push(parseInt(currentElement.attr('data-end')));\n\n      for (var i = 0; i < tmp.length; i++) {\n        if (parseInt(tmp[i].attr('data-start')) >= parseInt(currentElement.attr('data-start')) && parseInt(tmp[i].attr('data-start')) <= parseInt(currentElement.attr('data-end'))) {\n          dates.push(parseInt(tmp[i].attr('data-start')));\n        }\n        if (parseInt(tmp[i].attr('data-end')) >= parseInt(currentElement.attr('data-start')) && parseInt(tmp[i].attr('data-end')) <= parseInt(currentElement.attr('data-end'))) {\n          dates.push(parseInt(tmp[i].attr('data-end')));\n        }\n      }\n\n      dates = self.miscUniqueArray(dates);\n      dates.sort(function(a, b) {\n return (a > b) ? 1 : -1;\n});\n\n      for (var i = 0; i < dates.length; i++) {\n        var enMemeTemps = 0;\n        for (var j = 0; j < tmp.length; j++) {\n          if (dates[i] > parseInt(tmp[j].attr('data-start')) && dates[i] <= parseInt(tmp[j].attr('data-end'))) {\n            enMemeTemps++;\n          }\n        }\n        if ((enMemeTemps > 0 && enMemeTemps > nbEventNotOnCurrent) || nbEventNotOnCurrent === false) {\n          nbEventNotOnCurrent = enMemeTemps;\n        }\n      }\n\n      currentElement.attr('data-events', nbEventNotOnCurrent + 1);\n      currentElement.attr('data-divider', nbEventNotOnCurrent + 1);\n\n      i = tmp.length;\n      while (i--) {\n        if (parseInt(tmp[i].attr('data-divider')) > parseInt(currentElement.attr('data-divider'))) {\n          currentElement.attr('data-divider', tmp[i].attr('data-divider'));\n        }\n      }\n\n      var positions = [];\n      for (i = 0; i < parseInt(currentElement.attr('data-divider')); i++) {\n        positions[i] = false;\n        for (var j = 0; j < tmp.length; j++) {\n          for (var k = 0; k < String(tmp[j].attr('data-positions')).split(',').length; k++) {\n            var position = String(tmp[j].attr('data-positions')).split(',')[k];\n            if (position == i) {\n              positions[i] = true;\n            }\n          }\n        }\n      }\n\n      currentElement.attr('data-positions', -1);\n\n      i = 0;\n      while (parseInt(currentElement.attr('data-positions')) == -1) {\n        if (positions[i] === false) {\n          currentElement.attr('data-positions', i);\n          if (parseInt(currentElement.attr('data-divider')) - parseInt(currentElement.attr('data-events')) + 1 > 1) {\n            while (positions[i + 1] === false) {\n              currentElement.attr('data-positions', currentElement.attr('data-positions') + ',' + (i + 1));\n              i++;\n            }\n          }\n        }\n        i++;\n      }\n      if (self.conf.rooms !== false) {\n        var eventLeft = (String(currentElement.attr('data-positions')).split(',')[0] / self.conf.rooms) * 100;\n        var eventWidth = 100 / self.conf.rooms;\n      } else {\n        var eventWidth = 100 / (parseInt(currentElement.attr('data-divider')) / String(currentElement.attr('data-positions')).split(',').length);\n        var eventLeft = (String(currentElement.attr('data-positions')).split(',')[0] / parseInt(currentElement.attr('data-divider'))) * 100;\n      }\n     console.log('###rooms:' + self.conf.rooms);\n      self.setEventPosition(this, eventTop, eventHeight, eventLeft, eventWidth);\n    });\n  };\n\n  Calendar.prototype.positionEventsInMonth = function() {\n    var self = this;\n    this.element.find('li.calendar-month-events-day').each(function() {\n      var n = $(this).find('.calendar-event').length;\n      $(this).find('.calendar-event').each(function(i) {\n\n        var eventTop = (parseInt($(this).closest('.calendar-month-events-day').index()) * self.conf.month.weekline.heightPx) + 20 - 1;\n        var eventHeight = self.conf.month.weekline.heightPx - 21 + 1;\n        var eventWidth = 100 / n;\n        var eventLeft = (100 / n) * i;\n\n        self.setEventPosition(this, eventTop, eventHeight, eventLeft, eventWidth);\n      });\n    });\n  };\n\n  Calendar.prototype.setEventPosition = function(elem, eventTop, eventHeight, eventLeft, eventWidth) {\n    $(elem).attr('data-top', eventTop);\n    $(elem).attr('data-height', eventHeight);\n    $(elem).attr('data-left', eventLeft);\n    $(elem).attr('data-width', eventWidth);\n\n    $(elem).css({\n      top: (eventTop) + 'px',\n      height: (eventHeight) + 'px',\n      left: eventLeft + '%',\n      width: eventWidth + '%'\n    });\n  };\n\n  Calendar.prototype.weekDrawEvents = function() {\n    var e, i, day, fromHour, toHour, interval,\nn = this.events.length;\n    for (i = 0; i < n; i++) {\n      e = this.events[i];\n      day = false;\n      fromHour = this.conf.weekday.timeline.fromHour;\n      toHour = this.conf.weekday.timeline.toHour;\n      interval = this.conf.weekday.timeline.intervalMinutes;\n      $(this.element).find('.calendar-events-day').each(function(i, d) {\n        if (e.start >= (parseInt($(d).attr('data-time')) + fromHour * 60 * 60) && e.end <= (parseInt($(d).attr('data-time')) + toHour * 60 * 60) + ((60 / interval) * interval * 60)) {\n          day = d;\n        }\n      });\n      if (day === false) {\n        // Console.warn('Event '+i+' out of current view');\n      } else {\n        this.drawEventsOrDaynotes(\n          day,\n          i,\n          moment.unix(e.start).format('X'),\n          moment.unix(e.end).format('X'),\n          e.title,\n          e.content,\n          e.category,\n          this.getEventCategoryColor(e.category),\n          moment.unix(e.start).format(this.conf.weekday.timeline.format) + ' - ' + moment.unix(e.end).format(this.conf.weekday.timeline.format),\n          ['calendar-event']\n        );\n      }\n    }\n  };\n\n  Calendar.prototype.weekDrawDaynotes = function() {\n    var i, e, day,\nn = this.daynotes.length;\n    for (i = 0; i < n; i++) {\n      e = this.daynotes[i];\n      day = false;\n      $(this.element).find('.calendar-events-day').each(function(m, d) {\n        if (parseInt(moment.unix(e.time).startOf('day').format('X')) == parseInt($(d).attr('data-time'))) {\n          day = d;\n        }\n      });\n\n      if (day === false) {\n        // Console.warn('Event '+i+' out of current view');\n      } else {\n        var color = this.getDaynoteCategoryColor(e.category);\n        var from = this.conf.weekday.timeline.fromHour;\n        var toHour = this.conf.weekday.timeline.toHour + parseInt(this.conf.weekday.timeline.intervalMinutes / 60);\n        var toMin = ((this.conf.weekday.timeline.intervalMinutes / 60) - parseInt(this.conf.weekday.timeline.intervalMinutes / 60)) * 60;\n        this.drawEventsOrDaynotes(\n          day,\n          i,\n          moment.unix(e.time).startOf('day').add(from, 'h').format('X'),\n          moment.unix(e.time).startOf('day').add(toHour, 'h').add(toMin, 'm').format('X'),\n          e.title,\n          e.content,\n          e.category,\n          this.getDaynoteCategoryColor(e.category),\n          '',\n          ['calendar-event', 'calendar-daynote']\n        );\n      }\n    }\n  };\n\n  Calendar.prototype.drawEventsOrDaynotes = function(e, index, start, end, title, content, category, color, time_interval, classes) {\n    var li = $('<li>'),\ni = classes.length;\n    while (i--) {\n      li.addClass(classes[i]);\n    }\n    li.attr('data-index', index);\n    li.attr('data-start', start);\n    li.attr('data-end', end);\n    li.attr('data-title', title);\n    li.attr('data-content', content);\n    li.attr('data-category', category);\n    li.attr('data-color', color);\n    li.css('background', color);\n    a = $('<a>', {\n      href: '#'\n    });\n    a.append($('<em>', {\n      \"class\": 'event-name'\n    }).text(title));\n    a.append($('<em>', {\n      \"class\": 'event-content invisible'\n    }));\n\n    a.find('.event-content').append($('<b>', {\n      \"class\": 'event-date'\n    }).html(time_interval));\n    a.find('.event-content').append($('<br>'));\n    a.find('.event-content').append(content);\n\n    li.append(a);\n    $(e).find('ul').append(li);\n  };\n\n  Calendar.prototype.monthDrawEvents = function() {\n    var i, e, day,\nn = this.events.length;\n    for (i = 0; i < n; i++) {\n      e = this.events[i];\n      day = false;\n      $(this.element).find('.calendar-month-events-day').each(function(m, d) {\n        if (e.start >= (parseInt($(d).attr('data-time-from'))) && e.end <= (parseInt($(d).attr('data-time-to')))) {\n          day = d;\n        }\n      });\n      if (day === false) {\n        // Console.warn('Event '+i+' out of current view');\n      } else {\n        this.drawEventsOrDaynotes(\n          day,\n          i,\n          moment.unix(e.start).format('X'),\n          moment.unix(e.end).format('X'),\n          e.title,\n          e.content,\n          e.category,\n          this.getEventCategoryColor(e.category),\n          moment.unix(e.start).format(this.conf.month.day.format) + ' : ' + moment.unix(e.start).format(this.conf.weekday.timeline.format) + ' - ' + moment.unix(e.end).format(this.conf.weekday.timeline.format),\n          ['calendar-event']\n        );\n      }\n    }\n  };\n\n  Calendar.prototype.monthDrawDaynotes = function() {\n    var i, e, day,\nn = this.daynotes.length;\n    for (i = 0; i < n; i++) {\n      e = this.daynotes[i];\n      day = false;\n      $(this.element).find('.calendar-month-events-day').each(function(m, d) {\n        if (e.time >= (parseInt($(d).attr('data-time-from'))) && e.time <= (parseInt($(d).attr('data-time-to')))) {\n          day = d;\n        }\n      });\n      if (day === false) {\n        // Console.warn('Event '+i+' out of current view');\n      } else {\n        this.drawEventsOrDaynotes(\n          day,\n          i,\n          moment.unix(e.time).startOf('day').format('X'),\n          moment.unix(e.time).endOf('day').format('X'),\n          e.title,\n          e.content,\n          e.category,\n          this.getDaynoteCategoryColor(e.category),\n          moment.unix(e.time).format(this.conf.month.day.format),\n          ['calendar-event', 'calendar-daynote']\n        );\n      }\n    }\n  };\n\n  Calendar.prototype.drawModal = function() {\n    modal = '<div class=\"modal fade\" id=\"calendar-modal\" tabindex=\"-1\" role=\"dialog\">';\n    modal += '<div class=\"modal-dialog\" role=\"document\">';\n    modal += '<div class=\"modal-content\">';\n    modal += '<div class=\"modal-header\">';\n    modal += '<h3 class=\"modal-title\"></h3>';\n    modal += '<button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>';\n    modal += '</div>';\n    modal += '<div class=\"modal-body\">';\n    modal += '</div>';\n    modal += '</div>';\n    modal += '</div>';\n    modal += '</div>';\n    $(this.element).append(modal);\n  };\n\n  Calendar.prototype.drawNow = function() {\n    if (this.conf.now.enable) {\n      var hr = $('<hr>', {\n        \"class\": 'featurette-divider calendar-now'\n      });\n      hr.css('width', '100%');\n      hr.css('position', 'absolute');\n      hr.css('z-index', 3);\n      hr.css('border-top', this.conf.now.heightPx + 'px ' + this.conf.now.style + ' ' + this.conf.now.color);\n      var top = ((moment().format('X') - moment().startOf('day').add(this.conf.weekday.timeline.fromHour, 'h').format('X')) / 60 / this.conf.weekday.timeline.intervalMinutes * this.conf.weekday.timeline.heightPx) - (this.conf.weekday.timeline.heightPx / 2);\n      hr.css('top', top + 'px');\n      this.element.find('li.calendar-events-day[data-time=\"' + moment().startOf('day').format('X') + '\"]').find('ul').append(hr);\n      if (this.conf.now.refresh) {\n        var self = this;\n        setInterval(function() {\n          var hr = self.element.find('hr.calendar-now').remove();\n          var hr = $('<hr>', {\n            \"class\": 'featurette-divider calendar-now'\n          });\n          hr.css('width', '100%');\n          hr.css('position', 'absolute');\n          hr.css('z-index', 2);\n          hr.css('border-top', self.conf.now.heightPx + 'px ' + self.conf.now.style + ' ' + self.conf.now.color);\n          var top = ((moment().format('X') - moment().startOf('day').add(self.conf.weekday.timeline.fromHour, 'h').format('X')) / 60 / self.conf.weekday.timeline.intervalMinutes * self.conf.weekday.timeline.heightPx) - (self.conf.weekday.timeline.heightPx / 2);\n          hr.css('top', top + 'px');\n          self.element.find('li.calendar-events-day[data-time=\"' + moment().startOf('day').format('X') + '\"]').find('ul').append(hr);\n        }, 10000);\n      }\n    }\n  };\n\n  Calendar.prototype.hoverEventOrDaynote = function() {\n    var self = this;\n    this.element.find('.calendar-event').each(function() {\n      var setTimeoutConst;\n      $(this).hover(\n        function() {\n          elem = $(this);\n          setTimeoutConst = setTimeout(function() {\n            if (elem.hasClass('calendar-daynote')) {\n              $(self.element).trigger('Calendar.daynote-mouseenter', [\n                self,\n                elem\n              ]);\n            } else {\n              $(self.element).trigger('Calendar.event-mouseenter', [\n                self,\n                elem\n              ]);\n            }\n\n          }, self.conf.event.hover.delay);\n        },\n        function() {\n          clearTimeout(setTimeoutConst);\n          elem = $(this);\n          if (elem.hasClass('calendar-daynote')) {\n            $(self.element).trigger('Calendar.daynote-mouseleave', [\n              self,\n              elem\n            ]);\n          } else {\n            $(self.element).trigger('Calendar.event-mouseleave', [\n              self,\n              elem\n            ]);\n          }\n\n        }\n      );\n    });\n  };\n\n  Calendar.prototype.clickEventOrDaynote = function() {\n    var self = this;\n    this.element.find('.calendar-event').each(function() {\n      $(this).click(function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        elem = $(event.target);\n        if (elem.prop('nodeName') !== 'LI' && !elem.hasClass('calendar-event')) {\n          elem = elem.closest('li.calendar-event');\n        }\n        if (elem.hasClass('calendar-daynote')) {\n          $(self.element).trigger('Calendar.daynote-click', [\n            self,\n            elem,\n            self.daynotes[parseInt(elem.attr('data-index'))]\n          ]);\n        } else {\n          $(self.element).trigger('Calendar.event-click', [\n            self,\n            elem,\n            self.events[parseInt(elem.attr('data-index'))]\n          ]);\n        }\n      });\n    });\n  };\n\n  Calendar.prototype.resizeTimeline = function() {\n    var j = this.events.length;\n    while (j--) {\n      if (parseInt(moment.unix(this.events[j].start).format('HH')) < this.conf.weekday.timeline.fromHour) {\n        this.conf.weekday.timeline.fromHour = parseInt(moment.unix(this.events[j].start).format('HH'));\n      }\n      if (parseInt(this.events[j].end) > parseInt(moment.unix(this.events[j].end).startOf('day').add(this.conf.weekday.timeline.toHour, 'hour').format('X'))) {\n        this.conf.weekday.timeline.toHour = parseInt(moment.unix(this.events[j].end).hour());\n        if (this.conf.weekday.timeline.toHour < 23) {\n          this.conf.weekday.timeline.toHour++;\n        }\n      }\n    }\n  };\n\n  Calendar.prototype.getViewDays = function() {\n    var days = [];\n    if (this.getView() == 'day') {\n      days.push(parseInt(moment.unix(this.conf.unixTimestamp).format('X')));\n    }\n    if (this.getView() == 'week') {\n      for (var i = 0; i < this.conf.weekday.dayline.weekdays.length; i++) {\n        days.push(parseInt(moment.unix(this.conf.unixTimestamp).startOf('week').add(this.conf.weekday.dayline.weekdays[i], 'days').format('X')));\n      }\n    }\n    if (this.getView() == 'month') {\n      var nbDaysInMonth = moment.unix(this.conf.unixTimestamp).daysInMonth();\n      var time = moment.unix(this.conf.unixTimestamp).startOf('month');\n      for (var i = 0; i < nbDaysInMonth; i++) {\n        days.push(parseInt(time.startOf('day').format('X')));\n        time.add(1, 'days');\n      }\n    }\n    return days;\n  };\n\n  Calendar.prototype.addBtnLeftRight = function() {\n    var self = this;\n    this.element.find('.btn-move-calendar').click(function(event) {\n      var elem = $(event.target);\n      if (elem.prop('nodeName') !== 'BUTTON') {\n        elem = elem.closest('.btn-move-calendar');\n      }\n      self.moveCurrentIntervalView($(elem).attr('data-direction'));\n    });\n  };\n\n  Calendar.prototype.addSwipe = function() {\n    var self = this;\n    self.element.find('.calendar-events').swipe({\n      swipe: function(event, direction) {\n        if (direction == 'left' || direction == 'right') {\n          // Le swipe est à l'envers\n          if (direction == 'left') {\n            direction = 'right';\n          } else if (direction == 'right') {\n            direction = 'left';\n          }\n          self.moveCurrentIntervalView(direction);\n        }\n      },\n      threshold: 100,\n      allowPageScroll: 'auto'\n    });\n  };\n\n  Calendar.prototype.clickSwitchView = function() {\n    var self = this;\n    // Monthtoweek\n    $(this.element).find('.monthtoweek').click(function() {\n      self.setTimestamp(parseInt($(this).find('span').attr('data-timestamp')));\n      self.setView('week');\n      self.init();\n    });\n    // Weektomonth\n    $(this.element).find('.weektomonth').click(function() {\n      self.setView('month');\n      self.init();\n    });\n    // Daytoweek\n    $(this.element).find('.daytoweek').click(function() {\n      self.setView('week');\n      self.init();\n    });\n    // Weektoday\n    $(this.element).find('.weektoday').click(function() {\n      self.setTimestamp($(this).closest('.calendar-events-day').attr('data-time'));\n      self.setView('day');\n      self.init();\n    });\n  };\n\n  Calendar.prototype.keyboardSwitchView = function() {\n    if (!this.conf.enableKeyboard) {\n      return;\n    }\n    var self = this;\n    $(window).unbind('keydown').on('keydown', function(x) {\n      // Ctrl + left\n      if (x.keyCode == 37 && x.ctrlKey) {\n        self.moveCurrentIntervalView('left');\n      }\n      // Ctrl + right\n      if (x.keyCode == 39 && x.ctrlKey) {\n        self.moveCurrentIntervalView('right');\n      }\n      // Ctrl + up\n      if (x.keyCode == 38 && x.ctrlKey) {\n        if (self.getView() == 'week') {\n          self.setView('month');\n          self.init();\n        }\n        if (self.getView() == 'day') {\n          self.setView('week');\n          self.init();\n        }\n      }\n      // Ctrl + down\n      if (x.keyCode == 40 && x.ctrlKey) {\n        if (self.getView() == 'week') {\n          self.setView('day');\n          self.init();\n        }\n        if (self.getView() == 'month') {\n          self.setView('week');\n          self.init();\n        }\n      }\n    });\n  };\n\n  Calendar.prototype.moveCurrentIntervalView = function(direction) {\n    var word,\nself = this;\n    if (this.getView() == 'day') {\n      word = 'days';\n    }\n    if (this.getView() == 'week') {\n      word = 'week';\n    }\n    if (this.getView() == 'month') {\n      word = 'month';\n    }\n    if (direction == 'left') {\n      this.conf.unixTimestamp = parseInt(moment.unix(self.conf.unixTimestamp).subtract(1, word).format('X'));\n    }\n    if (direction == 'right') {\n      this.conf.unixTimestamp = parseInt(moment.unix(self.conf.unixTimestamp).add(1, word).format('X'));\n    }\n    this.init();\n  };\n\n  Calendar.prototype.mobileQuery = function() {\n    return $(window).width() < this.conf.defaultView.smallScreenThreshold ? 'mobile' : 'desktop';\n  };\n\n  Calendar.prototype.hexToRgb = function(hex) {\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n      return r + r + g + g + b + b;\n    });\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  };\n\n  Calendar.prototype.calculateCurrentInterval = function() {\n    var days = this.getViewDays();\n    this.fromTimestamp = parseInt(moment.unix(days[0]).startOf('day').format('X'));\n    this.toTimestamp = parseInt(moment.unix(days[days.length - 1]).endOf('day').format('X'));\n  };\n\n  Calendar.prototype.getCategories = function(object, attribute1, attribute2) {\n    var categories = [],\ne,\nn = object.length,\nfromTimeStamp = parseInt(this.fromTimestamp),\ntoTimeStamp = parseInt(this.toTimestamp);\n\n    for (var i = 0; i < n; i++) {\n      e = object[i];\n      if (parseInt(e[attribute1]) >= fromTimeStamp && parseInt(e[attribute2]) <= toTimeStamp) {\n        categories.push(e.category);\n      }\n    }\n    return this.miscUniqueArray(categories);\n  };\n\n  Calendar.prototype.getCategoryColor = function(category, object, colors, color) {\n    console.log('###category:' + category);\n    console.log('###object:' + JSON.stringify(object, null, 4));\n    console.log('###colors:' + colors);\n    console.log('###color:' + color);\n    var roomcolors = JSON.parse($(\"#calendar-roomcategories\").attr(\"data-calendar-roomcolors\"));\n    console.log('###COLORS:' + JSON.stringify(roomcolors, null, 4));\n\n    var used, j,\n    i = roomcolors.length;\n    while (i--) {\n      if (roomcolors[i].category == category) {\n        object.unshift({\n          category: category,\n          color: roomcolors[i].color\n        });\n        return roomcolors[i].color;\n      }\n    }\n// var i = object.length;\n//     while (i--) {\n//       if (object[i].category == category) {\n//         return object[i].color;\n//       }\n//     }\n\n    for (i = 0; i < colors.length; i++) {\n      used = false;\n      j = object.length;\n      while (j--) {\n        if (object[j].color == colors[i]) {\n          used = true;\n        }\n      }\n      if (!used) {\n        object.push({\n          category: category,\n          color: colors[i]\n        });\n        return colors[i];\n      }\n    }\n    return color;\n  };\n\n  Calendar.prototype.getEventsCategories = function() {\n    return this.getCategories(this.events, 'start', 'end');\n  };\n\n  Calendar.prototype.determineEventsCategories = function() {\n    var categories = this.getEventsCategories();\n    this.eventCategoryColor = (this.userEventCategoryColor.length > 0) ? this.userEventCategoryColor : [];\n    var i = categories.length;\n    while (i--) {\n      this.getEventCategoryColor(categories[i]);\n    }\n  };\n\n  Calendar.prototype.getEventCategoryColor = function(category) {\n    return this.getCategoryColor(category, this.eventCategoryColor, this.conf.colors.events, '#000000');\n  };\n\n  Calendar.prototype.getEventCategoriesColors = function() {\n    return this.eventCategoryColor;\n  };\n\n  Calendar.prototype.setEventCategoriesColors = function(categoriesColors) {\n    this.userEventCategoryColor = categoriesColors;\n  };\n\n  Calendar.prototype.getDaynotesCategories = function() {\n    return this.getCategories(this.daynotes, 'time', 'time');\n  };\n\n  Calendar.prototype.determineDaynotesCategories = function() {\n    var categories = this.getDaynotesCategories();\n    this.daynoteCategoryColor = (this.userDaynoteCategoryColor.length > 0) ? this.userDaynoteCategoryColor : [];\n    var i = categories.length;\n    while (i--) {\n      this.getDaynoteCategoryColor(categories[i]);\n    }\n  };\n\n  Calendar.prototype.getDaynoteCategoryColor = function(category) {\n    return this.getCategoryColor(category, this.daynoteCategoryColor, this.conf.colors.daynotes, '#FEFEFE');\n  };\n\n  Calendar.prototype.getDaynoteCategoriesColors = function() {\n    return this.daynoteCategoryColor;\n  };\n\n  Calendar.prototype.setDaynoteCategoriesColors = function(categoriesColors) {\n    this.userDaynoteCategoryColor = categoriesColors;\n  };\n\n  Calendar.prototype.getEventColors = function() {\n    return this.conf.colors.events;\n  };\n\n  Calendar.prototype.setEventColors = function(array) {\n    this.conf.colors.events = this.miscDedupeArray(array);\n    if (this.conf.colors.random) {\n      this.conf.colors.events.sort(function() {\n return 0.5 - Math.random();\n});\n    }\n  };\n\n  Calendar.prototype.getDaynoteColors = function() {\n    return this.conf.colors.daynotes;\n  };\n\n  Calendar.prototype.setDaynoteColors = function(array) {\n    this.conf.colors.daynotes = this.miscDedupeArray(array);\n    if (this.conf.colors.random) {\n      this.conf.colors.daynotes.sort(function() {\n return 0.5 - Math.random();\n});\n    }\n  };\n\n  Calendar.prototype.getEvents = function() {\n    return this.events;\n  };\n\n  Calendar.prototype.setEvents = function(events) {\n    this.events = (events) ? events : [];\n    this.events.sort(function(a, b) {\n return (a.start > b.start) ? 1 : -1;\n});\n  };\n\n  Calendar.prototype.addEvents = function(events) {\n    this.events = this.events.concat(events);\n    this.events.sort(function(a, b) {\n return (a.start > b.start) ? 1 : -1;\n});\n  };\n\n  Calendar.prototype.getDaynotes = function() {\n    return this.daynotes;\n  };\n\n  Calendar.prototype.setDaynotes = function(daynotes) {\n    this.daynotes = (daynotes) ? daynotes : [];\n    this.daynotes.sort(function(a, b) {\n return (a.start > b.start) ? 1 : -1;\n});\n  };\n\n  Calendar.prototype.addDaynotes = function(daynotes) {\n    this.daynotes = this.daynotes.concat(daynotes);\n    this.daynotes.sort(function(a, b) {\n return (a.start > b.start) ? 1 : -1;\n});\n  };\n\n  Calendar.prototype.getInitTime = function() {\n    return this.initTime;\n  };\n\n  Calendar.prototype.getViewInterval = function() {\n    return [this.fromTimestamp, this.toTimestamp];\n  };\n\n  Calendar.prototype.getNextViewInterval = function() {\n    var add = {'day': 'd', 'week': 'w', 'month': 'M'};\n    add = add[this.getView()];\n    return [\n      parseInt(moment.unix(this.fromTimestamp).add(1, add).format('X')),\n      parseInt(moment.unix(this.toTimestamp).add(1, add).format('X'))\n    ];\n\n  };\n\n  Calendar.prototype.getPrevViewInterval = function() {\n    var sub = {'day': 'd', 'week': 'w', 'month': 'M'};\n    sub = sub[this.getView()];\n    return [\n      parseInt(moment.unix(this.fromTimestamp).subtract(1, sub).format('X')),\n      parseInt(moment.unix(this.toTimestamp).subtract(1, sub).format('X'))\n    ];\n  };\n\n  Calendar.prototype.getTimestamp = function() {\n    return this.conf.unixTimestamp;\n  };\n\n  Calendar.prototype.setTimestamp = function(timestamp) {\n    this.conf.unixTimestamp = parseInt(timestamp);\n  };\n\n  Calendar.prototype.getView = function() {\n    return this.conf.view;\n  };\n\n  Calendar.prototype.setView = function(view) {\n    if (view == 'day' || view == 'week' || view == 'month') {\n      this.conf.view = view;\n    }\n  };\n\n  Calendar.prototype.miscDedupeArray = function(a) {\n    a = a.concat();\n    for (var i = 0; i < a.length; ++i) {\n      for (var j = i + 1; j < a.length; ++j) {\n        if (a[i] === a[j]) {\n          a.splice(j--, 1);\n        }\n      }\n    }\n    return a;\n  };\n\n  Calendar.prototype.miscUniqueArray = function(a) {\n    a = a.concat();\n    for (var i = 0; i < a.length; ++i) {\n      for (var j = i + 1; j < a.length; ++j) {\n        if (a[i] === a[j]) {\n a.splice(j--, 1);\n}\n      }\n    }\n    return a;\n  };\n\n  Calendar.prototype.miscUcfirstString = function(s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  };\n\n  var objSchedulesPlan = [];\n\n  // Initialization\n  jQuery.extend(jQuery.fn, {\n    Calendar: function(objArgs) {\n      var c = new Calendar($(this), (objArgs === undefined) ? {} : objArgs);\n      objSchedulesPlan.push(c);\n      return c;\n    }\n  });\n\n  // Reinitialization on screen rotation\n  var resizeListener1;\n  var pause1 = 500;\n  window.addEventListener(\"orientationchange\", function() {\n    clearTimeout(resizeListener1);\n    resizeListener1 = setTimeout(function() {\n      objSchedulesPlan.forEach(function(obj) {\n        obj.init();\n      });\n    }, pause1);\n  });\n\n  // Reinitialization on screen resize if not mobile\n  var resizeListener2;\n  var pause2 = 500;\n  window.addEventListener(\"resize\", function() {\n    clearTimeout(resizeListener2);\n    resizeListener2 = setTimeout(function() {\n      objSchedulesPlan.forEach(function(obj) {\n        if (obj.mobileQuery() == 'desktop') {\n          obj.init();\n        }\n      });\n    }, pause2);\n  });\n\n});\n"],"names":["jQuery","document","ready","$","Calendar","element","Args","moment","eventColors","daynoteColors","conf","locale","view","rooms","enableKeyboard","defaultView","largeScreen","smallScreen","smallScreenThreshold","weekday","timeline","fromHour","toHour","intervalMinutes","format","heightPx","autoResize","undefined","dayline","weekdays","month","weekFormat","weekline","dayheader","day","unixTimestamp","event","hover","delay","colors","events","daynotes","random","categories","enable","now","refresh","style","color","this","setEventColors","setDaynoteColors","eventCategoryColor","daynoteCategoryColor","userEventCategoryColor","userDaynoteCategoryColor","setEvents","setDaynotes","mobileQuery","setView","initTime","console","error","prototype","init","millis","Date","addClass","calculateCurrentInterval","trigger","getPrevViewInterval","getViewInterval","getNextViewInterval","html","hasClass","getView","resizeTimeline","drawCategories","weekDrawTime","weekDrawDays","weekDrawDaynotes","weekDrawEvents","monthDrawWeek","monthDrawWeekNumbers","monthDrawWeekDays","monthDrawDaynotes","monthDrawEvents","drawModal","drawNow","positionEvents","hoverEventOrDaynote","clickEventOrDaynote","addBtnLeftRight","addSwipe","clickSwitchView","keyboardSwitchView","defaultEvents","removeClass","binded","eventMouseenterDefault","self","elem","isDefaultPrevented","parseInt","css","closest","height","animate","top","width","left","find","off","on","eventMouseleaveDefault","parseFloat","attr","eventClickDefault","evt","modal","rgb","hexToRgb","r","g","b","append","text","e","target","eventCategoryClickDefault","opacity","eventCategoryMouseenterDefault","each","i","eventCategoryMouseleaveDefault","marginTop","$categoryBar","li","ul","time","startOf","add","limit","div","miscUcfirstString","unix","days","getViewDays","length","maxHeight","week","nbWeeks","targetUl","subtract","parent","endOf","determineEventsCategories","determineDaynotesCategories","label","category","prepend","hoverCategory","clickCategory","setTimeoutConst","setTimeout","clearTimeout","click","positionEventsInWeek","positionEventsInMonth","zeroLast","start","duration","zero","eventTop","eventHeight","nbEventNotOnCurrent","tmp","currentElement","j","push","endsOnCurrent","dates","miscUniqueArray","sort","a","enMemeTemps","positions","k","String","split","eventLeft","eventWidth","log","setEventPosition","n","index","interval","d","end","drawEventsOrDaynotes","title","content","getEventCategoryColor","m","getDaynoteCategoryColor","from","toMin","time_interval","classes","href","hr","setInterval","remove","preventDefault","stopPropagation","prop","hour","nbDaysInMonth","daysInMonth","moveCurrentIntervalView","swipe","direction","threshold","allowPageScroll","setTimestamp","window","unbind","x","keyCode","ctrlKey","word","hex","replace","result","exec","fromTimestamp","toTimestamp","getCategories","object","attribute1","attribute2","fromTimeStamp","toTimeStamp","getCategoryColor","JSON","stringify","roomcolors","parse","used","unshift","getEventsCategories","getEventCategoriesColors","setEventCategoriesColors","categoriesColors","getDaynotesCategories","getDaynoteCategoriesColors","setDaynoteCategoriesColors","getEventColors","array","miscDedupeArray","Math","getDaynoteColors","getEvents","addEvents","concat","getDaynotes","addDaynotes","getInitTime","sub","getTimestamp","timestamp","splice","s","charAt","toUpperCase","slice","resizeListener1","objSchedulesPlan","extend","fn","objArgs","c","resizeListener2","addEventListener","forEach","obj"],"mappings":";;;;;;AAOAA,OAAOC,UAAUC,OAAM,SAASC,YAErBC,SAASC,QAASC,SAED,mBAAZC,YAMRC,YAAc,CAChB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,WAIEC,cAAgB,CAClB,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,gBAIGC,KAAO,CACVC,OAASL,KAAKK,OAAUL,KAAKK,OAAS,KACtCC,KAAM,OACNC,OAAuB,IAAfP,KAAKO,OAAmBP,KAAKO,MACrCC,gBAAiBR,KAAKQ,gBAAkBR,KAAKQ,eAC7CC,YAAa,CACXC,YAAcV,KAAKS,aAAgBT,KAAKS,YAAYC,YAAgBV,KAAKS,YAAYC,YAAwB,OAC7GC,YAAcX,KAAKS,aAAgBT,KAAKS,YAAYE,YAAgBX,KAAKS,YAAYE,YAAuB,MAC5GC,qBAAuBZ,KAAKS,aAAgBT,KAAKS,YAAYG,qBAAyBZ,KAAKS,YAAYG,qBAA+B,KAExIC,QAAS,CACPC,SAAU,CACRC,SAAWf,KAAKa,SAAYb,KAAKa,QAAQC,UAAad,KAAKa,QAAQC,SAASC,SAAYf,KAAKa,QAAQC,SAASC,SAAmB,EACjIC,OAAShB,KAAKa,SAAYb,KAAKa,QAAQC,UAAad,KAAKa,QAAQC,SAASE,OAAUhB,KAAKa,QAAQC,SAASE,OAAmB,GAC7HC,gBAAkBjB,KAAKa,SAAYb,KAAKa,QAAQC,UAAad,KAAKa,QAAQC,SAASG,gBAAmBjB,KAAKa,QAAQC,SAASG,gBAA4B,GACxJC,OAASlB,KAAKa,SAAYb,KAAKa,QAAQC,UAAad,KAAKa,QAAQC,SAASI,OAAUlB,KAAKa,QAAQC,SAASI,OAA6B,QACvIC,SAAWnB,KAAKa,SAAYb,KAAKa,QAAQC,UAAad,KAAKa,QAAQC,SAASK,SAAYnB,KAAKa,QAAQC,SAASK,SAAqB,GACnIC,YAAapB,KAAKa,WAAYb,KAAKa,QAAQC,gBAAkDO,IAArCrB,KAAKa,QAAQC,SAASM,YAA4BpB,KAAKa,QAAQC,SAASM,cAElIE,QAAS,CACPC,SAAWvB,KAAKa,SAAYb,KAAKa,QAAQS,SAAYtB,KAAKa,QAAQS,QAAQC,SAAYvB,KAAKa,QAAQS,QAAQC,SAA2D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACzLL,OAASlB,KAAKa,SAAYb,KAAKa,QAAQS,SAAYtB,KAAKa,QAAQS,QAAQJ,OAAUlB,KAAKa,QAAQS,QAAQJ,OAAuC,aAC9IC,SAAWnB,KAAKa,SAAYb,KAAKa,QAAQS,SAAYtB,KAAKa,QAAQS,QAAQH,UAAYnB,KAAKa,QAAQS,QAAQH,UAAYnB,KAAKa,QAAQS,QAAQH,SAAW,GAAMnB,KAAKa,QAAQS,QAAQH,SAA+B,GACjNK,MAAO,CACLN,OAASlB,KAAKa,SAAYb,KAAKa,QAAQS,SAAYtB,KAAKa,QAAQS,QAAQE,OAAUxB,KAAKa,QAAQS,QAAQE,MAAMN,OAAUlB,KAAKa,QAAQS,QAAQE,MAAMN,OAAmD,YACrMC,SAAWnB,KAAKa,SAAYb,KAAKa,QAAQS,SAAYtB,KAAKa,QAAQS,QAAQE,OAAUxB,KAAKa,QAAQS,QAAQE,MAAML,SAAYnB,KAAKa,QAAQS,QAAQE,MAAML,SAA0B,GAChLM,WAAazB,KAAKa,SAAYb,KAAKa,QAAQS,SAAYtB,KAAKa,QAAQS,QAAQE,OAAUxB,KAAKa,QAAQS,QAAQE,MAAMC,WAAczB,KAAKa,QAAQS,QAAQE,MAAMC,WAA+B,OAI/LD,MAAO,CACLN,OAASlB,KAAKwB,OAAUxB,KAAKwB,MAAMN,OAAUlB,KAAKwB,MAAMN,OAAuB,YAC/EC,SAAWnB,KAAKwB,OAAUxB,KAAKwB,MAAML,UAAanB,KAAKwB,MAAML,SAAW,GAAMnB,KAAKwB,MAAML,SAAqB,GAC9GO,SAAU,CACRR,OAASlB,KAAKwB,OAAUxB,KAAKwB,MAAME,UAAa1B,KAAKwB,MAAME,SAASR,OAAUlB,KAAKwB,MAAME,SAASR,OAAqB,IACvHC,SAAWnB,KAAKwB,OAAUxB,KAAKwB,MAAME,UAAa1B,KAAKwB,MAAME,SAASP,SAAYnB,KAAKwB,MAAME,SAASP,SAAqB,IAE7HQ,UAAW,CACTJ,SAAWvB,KAAKwB,OAAUxB,KAAKwB,MAAMG,WAAc3B,KAAKwB,MAAMG,UAAUJ,SAAYvB,KAAKwB,MAAMG,UAAUJ,SAA2D,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACvLL,OAASlB,KAAKwB,OAAUxB,KAAKwB,MAAMG,WAAc3B,KAAKwB,MAAMG,UAAUT,OAAUlB,KAAKwB,MAAMG,UAAUT,OAA2B,OAChIC,SAAWnB,KAAKwB,OAAUxB,KAAKwB,MAAMG,WAAc3B,KAAKwB,MAAMG,UAAUR,SAAYnB,KAAKwB,MAAMG,UAAUR,SAAqB,IAEhIS,IAAK,CACHV,OAASlB,KAAKwB,OAAUxB,KAAKwB,MAAMI,KAAQ5B,KAAKwB,MAAMI,IAAIV,OAAUlB,KAAKwB,MAAMI,IAAIV,OAA6B,UAGpHW,cAAgB7B,KAAK6B,cAAiB7B,KAAK6B,cAAgB5B,SAASiB,OAAO,KAC3EY,MAAO,CACLC,MAAO,CACLC,MAAQhC,KAAK8B,OAAU9B,KAAK8B,MAAMC,OAAU/B,KAAK8B,MAAMC,MAAMC,MAAShC,KAAK8B,MAAMC,MAAMC,MAAoB,MAG/GC,OAAQ,CACNC,OAASlC,KAAKiC,QAAWjC,KAAKiC,OAAOC,OAAUlC,KAAKiC,OAAOC,OAAuBhC,YAClFiC,SAAWnC,KAAKiC,QAAWjC,KAAKiC,OAAOE,SAAYnC,KAAKiC,OAAOE,SAA2BhC,cAC1FiC,QAASpC,KAAKiC,UAAWjC,KAAKiC,OAAOG,QAAUpC,KAAKiC,OAAOG,SAE7DC,WAAY,CACVC,QAAStC,KAAKqC,kBAA0ChB,IAA3BrB,KAAKqC,WAAWC,QAAwBtC,KAAKqC,WAAWC,QACrFP,MAAO,CACLC,MAAQhC,KAAKqC,YAAerC,KAAKqC,WAAWN,OAAU/B,KAAKqC,WAAWN,MAAMC,MAAShC,KAAKqC,WAAWN,MAAMC,MAAoB,MAGnIO,IAAK,CACHD,SAAStC,KAAKuC,WAA4BlB,IAApBrB,KAAKuC,IAAID,QAAyBtC,KAAKuC,IAAID,QACjEE,UAAUxC,KAAKuC,WAA6BlB,IAArBrB,KAAKuC,IAAIC,SAA0BxC,KAAKuC,IAAIC,SACnErB,SAAWnB,KAAKuC,KAAQvC,KAAKuC,IAAIpB,SAAanB,KAAKuC,IAAIpB,SAAgB,EACvEsB,MAAQzC,KAAKuC,KAAQvC,KAAKuC,IAAIE,MAAUzC,KAAKuC,IAAIE,MAAmB,QACpEC,MAAQ1C,KAAKuC,KAAQvC,KAAKuC,IAAIG,MAAU1C,KAAKuC,IAAIG,MAAqB,YAK1EzC,OAAOI,OAAOsC,KAAKvC,KAAKC,aAGnBuC,eAAeD,KAAKvC,KAAK6B,OAAOC,aAChCW,iBAAiBF,KAAKvC,KAAK6B,OAAOE,eAGlCW,mBAAqB,QACrBC,qBAAuB,QAGvBC,uBAAyB,QACzBC,yBAA2B,QAG3BC,UAAWlD,KAAKkC,OAAUlC,KAAKkC,OAAS,SAGxCiB,YAAanD,KAAKmC,SAAYnC,KAAKmC,SAAW,IAGzB,UAAtBQ,KAAKS,mBACFC,QAAQV,KAAKvC,KAAKK,YAAYE,kBAE9B0C,QAAQV,KAAKvC,KAAKK,YAAYC,kBAIhCX,QAAUA,aACVuD,UAAW,OA1JdC,QAAQC,MAAM,gCA6JlB1D,SAAS2D,UAAUC,KAAO,eACpBC,OAASC,KAAKrB,WACbxC,QAAQ8D,SAAS,gBACjBC,2BACLjE,EAAE8C,KAAK5C,SAASgE,QAAQ,gBAAiB,CACvCpB,KACAA,KAAKqB,sBACLrB,KAAKsB,kBACLtB,KAAKuB,wBAEPrE,EAAE8C,KAAK5C,SAASoE,KAAK,IAChBtE,EAAE8C,KAAK5C,SAASqE,SAAS,aAC5BvE,EAAE8C,KAAK5C,SAAS8D,SAAS,YAEL,OAAlBlB,KAAK0B,WAAwC,QAAlB1B,KAAK0B,WAC9B1B,KAAKvC,KAAKS,QAAQC,SAASM,iBACxBkD,sBAGJC,iBACiB,OAAlB5B,KAAK0B,WAAwC,QAAlB1B,KAAK0B,iBAC7BG,oBACAC,oBACAC,wBACAC,kBAEe,SAAlBhC,KAAK0B,iBACFO,qBACAC,4BACAC,yBACAC,yBACAC,wBAEFC,iBACAC,eACAC,sBACAC,2BACAC,2BACAC,uBACAC,gBACAC,uBACAC,0BACAC,qBACA3F,QAAQ4F,YAAY,gBACpBrC,SAAYM,KAAKrB,MAAQoB,OAAU,MAG1C7D,SAAS2D,UAAUiC,cAAgB,cACd,GAAf/C,KAAKiD,YAILC,uBAAyB,SAAS/D,MAAOgE,KAAMC,UAC5CjE,MAAMkE,qBAAsB,IAC3BC,SAASF,KAAKG,IAAI,SAAYH,KAAKI,QAAQ,MAAMC,SAAW,EAAKN,KAAK1F,KAAKS,QAAQC,SAASK,SAAU,KACpGA,SAAW8E,SAASF,KAAKG,IAAI,QAAUD,SAASF,KAAKG,IAAI,WAC7DH,KACGG,IAAI,UAAW,IACfG,QAAQ,CACPD,OAAQjF,SACRmF,IAAK,EACLC,MAAO,OACPC,KAAM,GACL,QAEA,CACDrF,SAAW4E,KAAKI,QAAQ,MAAMC,SAAWH,SAASF,KAAKG,IAAI,QAC/DH,KACGG,IAAI,UAAW,IACfG,QAAQ,CACPD,OAAQjF,SACRoF,MAAO,OACPC,KAAM,GACL,IAGPT,KAAKU,KAAK,eAAed,YAAY,aACrCI,KAAKU,KAAK,kBAAkBd,YAAY,eAG5C9F,EA7BW8C,KA6BJ5C,SAAS2G,IAAI,4BAA6Bb,wBAAwBc,GAAG,4BAA6Bd,wBACzGhG,EA9BW8C,KA8BJ5C,SAAS2G,IAAI,8BAA+Bb,wBAAwBc,GAAG,8BAA+Bd,4BAEzGe,uBAAyB,SAAS9E,MAAOgE,KAAMC,MAC5CjE,MAAMkE,uBACTD,KACGG,IAAI,UAAW,QACfG,QAAQ,CACPD,OAAQS,WAAWd,KAAKe,KAAK,gBAAkB,KAC/CR,IAAKO,WAAWd,KAAKe,KAAK,aAC1BP,MAAOM,WAAWd,KAAKe,KAAK,eAAiB,IAC7CN,KAAMK,WAAWd,KAAKe,KAAK,cAAgB,KAC1C,IAELf,KAAKU,KAAK,kBAAkB5C,SAAS,eAGzChE,EA9CW8C,KA8CJ5C,SAAS2G,IAAI,4BAA6BE,wBAAwBD,GAAG,4BAA6BC,wBACzG/G,EA/CW8C,KA+CJ5C,SAAS2G,IAAI,8BAA+BE,wBAAwBD,GAAG,8BAA+BC,4BAEzGG,kBAAoB,SAASjF,MAAOgE,KAAMC,KAAMiB,SAC7ClF,MAAMkE,qBAAsB,KAC3BiB,MAAQpH,EAAEiG,KAAK/F,SAAS0G,KAAK,mBAC7BS,IAAMpB,KAAKqB,SAASpB,KAAKe,KAAK,eAClCG,MAAMf,IAAI,aAAc,QAAUgB,IAAIE,EAAI,KAAOF,IAAIG,EAAI,KAAOH,IAAII,EAAI,UACxEL,MAAMR,KAAK,gBAAgBc,OAAOxB,KAAKe,KAAK,cAAgB,KAC5DG,MAAMR,KAAK,eAAec,OACxB1H,EAAE,QAAQ0H,OACR1H,EAAE8C,MAAMwD,QAAQ,wBAAwBM,KAAK,QAAQtC,QACrDoD,OACA,KACAA,OACA1H,EAAE,WAAW2H,KAAKzB,KAAKU,KAAK,eAAee,UAG/CP,MAAMR,KAAK,eAAec,OAAOxB,KAAKU,KAAK,kBAAkBtC,QAC7D8C,MAAMA,MAAM,QACZA,MAAMN,GAAG,mBAAmB,SAASc,GACnC5H,EAAE4H,EAAEC,QAAQjB,KAAK,gBAAgBtC,KAAK,IACtCtE,EAAE4H,EAAEC,QAAQjB,KAAK,eAAetC,KAAK,SAI3CtE,EAxEW8C,KAwEJ5C,SAAS2G,IAAI,uBAAwBK,mBAAmBJ,GAAG,uBAAwBI,mBAC1FlH,EAzEW8C,KAyEJ5C,SAAS2G,IAAI,yBAA0BK,mBAAmBJ,GAAG,yBAA0BI,uBAE1FY,0BAA4B,SAAS7F,MAAOgE,KAAMC,UAC/CjE,MAAMkE,qBAAsB,KAC3B9D,OAAS4D,KAAK/F,QAAQ0G,KAAK,kCAAoC5G,EAAEkG,MAAMyB,OAAS,MAChD,SAAhC3H,EAAEkG,MAAMe,KAAK,iBACf5E,OAAOmE,QAAQ,CACbuB,QAAS,GACR,KAAK,WACN1F,OAAOgE,IAAI,UAAW,QACtBrG,EAAEkG,MAAMG,IAAI,mBAAoB,WAChCrG,EAAEkG,MAAMe,KAAK,gBAAgB,MAGG,QAAhCjH,EAAEkG,MAAMe,KAAK,kBACf5E,OAAOgE,IAAI,UAAW,aACtBrG,EAAEkG,MAAMG,IAAI,mBAAoBrG,EAAEkG,MAAMe,KAAK,eAC7C5E,OAAOmE,QAAQ,CACbuB,QAAS,GACR,KAAK,WACN/H,EAAEkG,MAAMe,KAAK,gBAAgB,SAKrCjH,EAlGW8C,KAkGJ5C,SAAS2G,IAAI,gCAAiCiB,2BAA2BhB,GAAG,gCAAiCgB,2BACpH9H,EAnGW8C,KAmGJ5C,SAAS2G,IAAI,kCAAmCiB,2BAA2BhB,GAAG,kCAAmCgB,+BAEpHE,+BAAiC,SAAS/F,MAAOgE,KAAMC,MACpDjE,MAAMkE,sBACTF,KAAK/F,QAAQ0G,KAAK,mBAAmBqB,MAAK,SAASC,EAAGN,GAChD5H,EAAE4H,GAAGX,KAAK,kBAAoBf,KAAKyB,QACrC3H,EAAE4H,GAAGvB,IAAI,UAAW,QAK5BrG,EA9GW8C,KA8GJ5C,SAAS2G,IAAI,qCAAsCmB,gCAAgClB,GAAG,qCAAsCkB,gCACnIhI,EA/GW8C,KA+GJ5C,SAAS2G,IAAI,uCAAwCmB,gCAAgClB,GAAG,uCAAwCkB,oCAEnIG,+BAAiC,SAASlG,MAAOgE,KAAMC,MACpDjE,MAAMkE,sBACTF,KAAK/F,QAAQ0G,KAAK,mBAAmBqB,MAAK,SAASC,EAAGN,GACpD5H,EAAE4H,GAAGvB,IAAI,UAAW,OAI1BrG,EAxHW8C,KAwHJ5C,SAAS2G,IAAI,qCAAsCsB,gCAAgCrB,GAAG,qCAAsCqB,gCACnInI,EAzHW8C,KAyHJ5C,SAAS2G,IAAI,uCAAwCsB,gCAAgCrB,GAAG,uCAAwCqB,qCAElIpC,QAAS,IAGhB9F,SAAS2D,UAAUe,aAAe,WAChC3E,EAAE8C,KAAK5C,SAASwH,OAAO1H,EAAE,QAAS,OACvB,uBAEXA,EAAE8C,KAAK5C,SAAS0G,KAAK,yBAAyBP,IAAI,cAAevD,KAAKvC,KAAKS,QAAQS,QAAQH,SAAW,UAClG8G,UAAYtF,KAAKvC,KAAKS,QAAQS,QAAQE,MAAML,YAC5CwB,KAAKvC,KAAKiC,WAAWC,OAAQ,KAC3B4F,aAAerI,EAAE8C,KAAK5C,SAAS0G,KAAK,2BACxCwB,WAAaC,aAAa9B,SAAWS,WAAWqB,aAAahC,IAAI,kBAEnErG,EAAE8C,KAAK5C,SAAS0G,KAAK,yBAAyBP,IAAI,aAAc+B,UAAY,MAE5EpI,EAAE8C,KAAK5C,SAAS0G,KAAK,yBAAyBc,OAAO1H,EAAE,aAEnDsI,GACRC,GAAKvI,EAAE8C,KAAK5C,SAAS0G,KAAK,yBAAyBA,KAAK,MAEhD4B,KAAOpI,OAAOA,UAAUqI,QAAQ,QACpCD,KAAKE,IAAI5F,KAAKvC,KAAKS,QAAQC,SAASC,SAAU,aAE1CyH,OAAoD,IAAzC7F,KAAKvC,KAAKS,QAAQC,SAASE,OAAS,GAAkD,GAAtC2B,KAAKvC,KAAKS,QAAQC,SAASC,UAAkB4B,KAAKvC,KAAKS,QAAQC,SAASG,gBACnI8G,EAAI,EACDA,EAAIS,QACTL,GAAKtI,EAAE,SACJ0H,OAAO1H,EAAE,UAAU2H,KAAKa,KAAKnH,OAAOyB,KAAKvC,KAAKS,QAAQC,SAASI,UAClEiH,GAAG/B,OAAOzD,KAAKvC,KAAKS,QAAQC,SAASK,UACrCiH,GAAGb,OAAOY,IACVE,KAAKE,IAAI5F,KAAKvC,KAAKS,QAAQC,SAASG,gBAAiB,KACrD8G,KAIJjI,SAAS2D,UAAUgB,aAAe,WAChC5E,EAAE8C,KAAK5C,SAASwH,OAAO1H,EAAE,QAAS,OACvB,yBAGP4I,IAAM5I,EAAE,QAAS,OACV,mBAERqG,IAAI,SAAUvD,KAAKvC,KAAKS,QAAQS,QAAQE,MAAML,SAAW,MACzD+E,IAAI,aAAc,UAClBA,IAAI,eAAgBvD,KAAKvC,KAAKS,QAAQS,QAAQE,MAAML,SAAW,IAAM,EAAI,MAEtD,QAAlBwB,KAAK0B,YACPoE,IAAIjB,KAAK7E,KAAK+F,kBAAkBzI,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeX,OAAOyB,KAAKvC,KAAKS,QAAQS,QAAQE,MAAMN,UAC5GuH,IAAI5E,SAAS,gBAEO,OAAlBlB,KAAK0B,YACPoE,IAAIjB,KAAK7E,KAAK+F,kBAAkBzI,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeX,OAAOyB,KAAKvC,KAAKS,QAAQS,QAAQE,MAAMC,cAC5GgH,IAAI5E,SAAS,cAEfhE,EAAE8C,KAAK5C,SAAS0G,KAAK,uBAAuBc,OAAOkB,KAEnD5I,EAAE8C,KAAK5C,SAAS0G,KAAK,uBAAuBc,OAAO1H,EAAE,iBAEjDsI,GACRC,GAAKvI,EAAE8C,KAAK5C,SAAS0G,KAAK,uBAAuBA,KAAK,MAE9CmC,KAAOjG,KAAKkG,cAEPd,EAAI,EAAGA,EAAIa,KAAKE,OAAQf,IAC/BM,KAAOpI,OAAO0I,KAAKC,KAAKb,KAExBI,GAAKtI,EAAE,OAAQ,OACJ,yBAERqG,IAAI,QAAS,IAAM0C,KAAKE,OAAS,MACpCL,IAAM5I,EAAE,QAAS,OACN,yBAEPuG,OAAOzD,KAAKvC,KAAKS,QAAQS,QAAQH,UAC5B,GAAL4G,GAAgC,WAAtBpF,KAAKS,eACjBqF,IAAIlB,OAAO1H,EAAE,WAAY,OACd,2CACRiH,KAAK,iBAAkB,QAAQS,OAAO1H,EAAE,MAAO,OACvC,wBAGb4I,IAAIlB,OAAO1H,EAAE,UACVgE,SAAS,aACTqC,IAAI,QAAS,QACb/B,KAAKxB,KAAK+F,kBAAkBL,KAAKnH,OAAOyB,KAAKvC,KAAKS,QAAQS,QAAQJ,WAGjE6G,GAAKa,KAAKE,OAAS,GAA2B,WAAtBnG,KAAKS,eAC/BqF,IAAIlB,OAAO1H,EAAE,WAAY,OACd,2CACRiH,KAAK,iBAAkB,SAASS,OAAO1H,EAAE,MAAO,OACxC,yBAGbsI,GAAGZ,OAAOkB,KACVN,GAAGrB,KAAK,YAAauB,KAAKC,QAAQ,OAAOpH,OAAO,MAChDiH,GAAGZ,OAAO1H,EAAE,SACZsI,GAAG1B,KAAK,MAAML,OAAS,GAAKzD,KAAKvC,KAAKS,QAAQC,SAASG,iBAAoB0B,KAAKvC,KAAKS,QAAQC,SAASE,OAAS2B,KAAKvC,KAAKS,QAAQC,SAASC,UAAY4B,KAAKvC,KAAKS,QAAQC,SAASK,SAAc,GAAKwB,KAAKvC,KAAKS,QAAQC,SAASG,gBAAmB0B,KAAKvC,KAAKS,QAAQC,SAASK,UAC7QiH,GAAGb,OAAOY,QAGRY,UAAY,EAChBlJ,EAAE8C,KAAK5C,SAAS0G,KAAK,wBAAwBqB,MAAK,WAC5CjI,EAAE8C,MAAMyD,SAAW2C,YACrBA,UAAYlJ,EAAE8C,MAAMyD,aAGxBvG,EAAE8C,KAAK5C,SAAS0G,KAAK,wBAAwBqB,MAAK,WAChDjI,EAAE8C,MAAMyD,OAAO2C,cAGbpG,KAAKvC,KAAKS,QAAQS,QAAQH,SAAW4H,iBAClC3I,KAAKS,QAAQS,QAAQH,SAAW4H,UACrClJ,EAAE8C,KAAK5C,SAAS0G,KAAK,yBAAyBP,IAAI,cAAevD,KAAKvC,KAAKS,QAAQS,QAAQH,SAAW,QAM1GrB,SAAS2D,UAAUmB,cAAgB,WACjC/E,EAAE8C,KAAK5C,SAASwH,OAAO1H,EAAE,QAAS,OACvB,yBAEP4I,IAAM5I,EAAE,QAAS,OACV,mBAEX4I,IAAIvC,IAAI,SAAUvD,KAAKvC,KAAKoB,MAAML,SAAW,MAEnB,WAAtBwB,KAAKS,eACPqF,IAAIlB,OAAO1H,EAAE,WAAY,OACd,2CAERiH,KAAK,iBAAkB,QACvBS,OAAO1H,EAAE,MAAO,OACN,wBAIf4I,IAAIlB,OAAO1H,EAAE,UACVqG,IAAI,WAAY,YAChBA,IAAI,MAAOvD,KAAKvC,KAAKoB,MAAML,SAAW,EAAI,MAC1C+E,IAAI,QAAS,OACbA,IAAI,YAAa,uBACjBsB,KAAK7E,KAAK+F,kBAAkBzI,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeX,OAAOyB,KAAKvC,KAAKoB,MAAMN,WAEjE,WAAtByB,KAAKS,eACPqF,IAAIlB,OAAO1H,EAAE,WAAY,OACd,2CAERqG,IAAI,QAAS,SACbY,KAAK,iBAAkB,SACvBS,OAAO1H,EAAE,MAAO,OACN,yBAKfA,EAAE8C,KAAK5C,SAAS0G,KAAK,uBAAuBc,OAAOkB,KACnD5I,EAAE8C,KAAK5C,SAAS0G,KAAK,uBAAuBc,OAAO1H,EAAE,iBAEjDsI,GACRC,GAAKvI,EAAE8C,KAAK5C,SAAS0G,KAAK,uBAAuBA,KAAK,MAE9C4B,KAAOpI,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeyG,QAAQ,SACpD9G,MAAQyE,SAASoC,KAAKnH,OAAO,OAC7B8H,KAAO/C,SAASoC,KAAKnH,OAAO,MAC5B+H,QAAU,EACPhD,SAASoC,KAAKnH,OAAO,QAAUM,OAAO,KAC3CyH,UACOhD,SAASoC,KAAKnH,OAAO,OAAS8H,MACnCX,KAAKE,IAAI,EAAG,QAEdS,KAAO/C,SAASoC,KAAKnH,OAAO,UAGzB,IAAI6G,EAAI,EAAGA,EAAIpF,KAAKvC,KAAKoB,MAAMG,UAAUJ,SAASuH,OAAQf,IAC7DM,KAAOpI,SAASqI,QAAQ,QAAQC,IAAI5F,KAAKvC,KAAKoB,MAAMG,UAAUJ,SAASwG,GAAI,SAC3EI,GAAKtI,EAAE,OAAQ,OACJ,+BAER0H,OAAO1H,EAAE,SACTqG,IAAI,SAAUvD,KAAKvC,KAAKoB,MAAMG,UAAUR,SAAW,MACnD+E,IAAI,eAAgBvD,KAAKvC,KAAKoB,MAAMG,UAAUR,SAAW,IAAM,EAAI,MACnEqG,KAAK7E,KAAK+F,kBAAkBL,KAAKnH,OAAOyB,KAAKvC,KAAKoB,MAAMG,UAAUT,WAErEiH,GAAGjC,IAAI,QAAS,IAAMvD,KAAKvC,KAAKoB,MAAMG,UAAUJ,SAASuH,OAAS,KAClEX,GAAGZ,OAAO1H,EAAE,QAAQqG,IAAI,SAAU+C,QAAUtG,KAAKvC,KAAKoB,MAAME,SAASP,SAAW,OAChFiH,GAAGb,OAAOY,QAERY,UAAY,EAChBlJ,EAAE8C,KAAK5C,SAAS0G,KAAK,8BAA8BqB,MAAK,eAClDL,EAAI5H,EAAE8C,MAAM8D,KAAK,OACjB5G,EAAE4H,GAAGrB,SAAW2C,YAClBA,UAAYlJ,EAAE4H,GAAGrB,aAGrBvG,EAAE8C,KAAK5C,SAAS0G,KAAK,8BAA8BqB,MAAK,eAClDL,EAAI5H,EAAE8C,MAAM8D,KAAK,OACrB5G,EAAE4H,GAAGrB,OAAO2C,eAIhBjJ,SAAS2D,UAAUoB,qBAAuB,WACxChF,EAAE8C,KAAK5C,SAASwH,OAAO1H,EAAE,QAAS,OACvB,2BAEPoI,UAAYtF,KAAKvC,KAAKoB,MAAMG,UAAUR,SAC1C8G,WAAatF,KAAKvC,KAAKoB,MAAML,SACzBwB,KAAKvC,KAAKiC,WAAWC,SACvB2F,WAAa,IAEfA,WAAa,EACbpI,EAAE8C,KAAK5C,SAAS0G,KAAK,yBAAyBP,IAAI,aAAc+B,UAAY,MAC5EpI,EAAE8C,KAAK5C,SAAS0G,KAAK,yBAAyBc,OAAO1H,EAAE,iBAEnDsI,GACRC,GAAKvI,EAAE8C,KAAK5C,SAAS0G,KAAK,yBAAyBA,KAAK,MAEhD4B,KAAOpI,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeyG,QAAQ,SACpD9G,MAAQyE,SAASoC,KAAKnH,OAAO,OAC7B8H,KAAO/C,SAASoC,KAAKnH,OAAO,MACzB+E,SAASoC,KAAKnH,OAAO,QAAUM,OAAO,MAC3C2G,GAAKtI,EAAE,OAAQ,OACJ,iBAER0H,OAAO1H,EAAE,UACTiH,KAAK,iBAAkBuB,KAAKnH,OAAO,MACnCsG,KAAKa,KAAKnH,OAAOyB,KAAKvC,KAAKoB,MAAME,SAASR,SAASgF,IAAI,aAAcvD,KAAKvC,KAAKoB,MAAME,SAASP,SAAW,EAAI,OAEhHgH,GAAG/B,OAAOzD,KAAKvC,KAAKoB,MAAME,SAASP,UACnCiH,GAAGb,OAAOY,IACHlC,SAASoC,KAAKnH,OAAO,OAAS8H,MACnCX,KAAKE,IAAI,EAAG,QAEdS,KAAO/C,SAASoC,KAAKnH,OAAO,QAIhCpB,SAAS2D,UAAUqB,kBAAoB,mBAEzCoE,SAAUf,GADFS,KAAOjG,KAAKkG,cAGZd,EAAI9B,SAAShG,OAAO0I,KAAKC,KAAK,IAAI/H,WAClCwH,KAAOpI,OAAO0I,KAAKC,KAAK,IACrBb,EAAI,GACTM,KAAOA,KAAKc,SAAS,EAAG,QACxBD,SAAWvG,KAAK5C,QAAQ0G,KAAK,gEAAkE9D,KAAK+F,kBAAkBL,KAAKnH,OAAOyB,KAAKvC,KAAKoB,MAAMG,UAAUT,SAAW,MAAMkI,SAAS3C,KAAK,OAC3L0B,GAAKtI,EAAE,SACJqG,IAAI,SAAUvD,KAAKvC,KAAKoB,MAAME,SAASP,SAAW,MACrDtB,EAAEqJ,UAAU3B,OAAOY,IACnBJ,QAGFM,KAAOO,KAAKE,OACPf,EAAI,EAAGA,EAAIM,KAAMN,IACpBmB,SAAWvG,KAAK5C,QAAQ0G,KAAK,gEAAkE9D,KAAK+F,kBAAkBzI,OAAO0I,KAAKC,KAAKb,IAAI7G,OAAOyB,KAAKvC,KAAKoB,MAAMG,UAAUT,SAAW,MAAMkI,SAAS3C,KAAK,OAC3M0B,GAAKtI,EAAE,OAAQ,OACJ,+BAERqG,IAAI,SAAUvD,KAAKvC,KAAKoB,MAAME,SAASP,SAAW,MACrDgH,GAAGrB,KAAK,iBAAkB7G,OAAO0I,KAAKC,KAAKb,IAAIO,QAAQ,OAAOpH,OAAO,MACrEiH,GAAGrB,KAAK,eAAgB7G,OAAO0I,KAAKC,KAAKb,IAAIsB,MAAM,OAAOnI,OAAO,MACjEiH,GAAGZ,OAAO1H,EAAE,UAAU2H,KAAKvH,OAAO0I,KAAKC,KAAKb,IAAI7G,OAAOyB,KAAKvC,KAAKoB,MAAMI,IAAIV,UAC3ErB,EAAEqJ,UAAU3B,OAAOY,SAGhBpI,QAAQ0G,KAAK,8BAA8BqB,MAAK,WACnDjI,EAAE8C,MAAM4E,OAAO1H,EAAE,aAIrBC,SAAS2D,UAAUc,eAAiB,mBAC7B+E,iCACAC,8BAED5G,KAAKvC,KAAKiC,WAAWC,OAAQ,SAC3BkH,MACVf,IAAM5I,EAAE,QAAS,OACA,wBACRqG,IAAI,SAAU,QACR6B,EAAI,EAAGA,EAAIpF,KAAKG,mBAAmBgG,OAAQf,KAClDyB,MAAQ3J,EAAE,SAAU,OACT,wCAELqG,IAAI,eAAgB,OAC1BsD,MAAMtD,IAAI,mBAAoBvD,KAAKG,mBAAmBiF,GAAGrF,OACzD8G,MAAMtD,IAAI,SAAU,WACpBsD,MAAM1C,KAAK,aAAcnE,KAAKG,mBAAmBiF,GAAGrF,OACpD8G,MAAM1C,KAAK,gBAAgB,GAC3B0C,MAAMhC,KAAK7E,KAAKG,mBAAmBiF,GAAG0B,UACtChB,IAAIlB,OAAOiC,WAERzB,EAAI,EAAGA,EAAIpF,KAAKI,qBAAqB+F,OAAQf,KAChDyB,MAAQ3J,EAAE,SAAU,OACT,+DAELqG,IAAI,eAAgB,OAC1BsD,MAAMtD,IAAI,mBAAoBvD,KAAKI,qBAAqBgF,GAAGrF,OAC3D8G,MAAMtD,IAAI,SAAU,WACpBsD,MAAM1C,KAAK,aAAcnE,KAAKI,qBAAqBgF,GAAGrF,OACtD8G,MAAM1C,KAAK,gBAAgB,GAC3B0C,MAAMhC,KAAK7E,KAAKI,qBAAqBgF,GAAG0B,UACxChB,IAAIlB,OAAOiC,YAERzJ,QAAQ2J,QAAQjB,UAChBkB,qBACAC,kBAIT9J,SAAS2D,UAAUkG,cAAgB,eAC7BE,gBAAiB9D,KACzBD,KAAOnD,UACE5C,QAAQ0G,KAAK,mBAAmB1E,OACnC,WACEgE,KAAOlG,EAAE8C,MACTkH,gBAAkBC,YAAW,WACvB/D,KAAK3B,SAAS,0BAChBvE,EAAEiG,KAAK/F,SAASgE,QAAQ,uCAAwC,CAC9D+B,KACAC,OAGFlG,EAAEiG,KAAK/F,SAASgE,QAAQ,qCAAsC,CAC5D+B,KACAC,SAGHD,KAAK1F,KAAKiC,WAAWN,MAAMC,UAEhC,WACE+H,aAAaF,kBACb9D,KAAOlG,EAAE8C,OACAyB,SAAS,0BAChBvE,EAAEiG,KAAK/F,SAASgE,QAAQ,uCAAwC,CAC9D+B,KACAC,OAGFlG,EAAEiG,KAAK/F,SAASgE,QAAQ,qCAAsC,CAC5D+B,KACAC,WAOVjG,SAAS2D,UAAUmG,cAAgB,eAErC9D,KAAOnD,UACE5C,QAAQ0G,KAAK,mBAAmBuD,OAAM,SAASlI,OAC9CjC,EAAEiC,MAAM4F,QAAQtD,SAAS,0BAC3BvE,EAAEiG,KAAK/F,SAASgE,QAAQ,kCAAmC,CACzD+B,KALFC,YASAlG,EAAEiG,KAAK/F,SAASgE,QAAQ,gCAAiC,CACvD+B,KAVFC,gBAiBNjG,SAAS2D,UAAU0B,eAAiB,kBAC1BxC,KAAK0B,eACN,UACA,YACE4F,iCAGF,aACEC,0BAKXpK,SAAS2D,UAAUwG,qBAAuB,eACpCnE,KAAOnD,KACPwH,SAAW,OACVpK,QAAQ0G,KAAK,mBAAmBqB,MAAK,SAASC,OAE7CqC,MAAQnE,SAASpG,EAAE8C,MAAMmE,KAAK,eAE9BuD,SADMpE,SAASpG,EAAE8C,MAAMmE,KAAK,aACXsD,MACjBE,KAAOrE,SAASpG,EAAE8C,MAAMwD,QAAQ,0BAA0BW,KAAK,cAAuD,GAAtChB,KAAK1F,KAAKS,QAAQC,SAASC,SAAgB,GAC3HuJ,KAAOH,WACTA,SAAWG,UAETC,UAAaH,MAAQE,MAAQ,GAAKxE,KAAK1F,KAAKS,QAAQC,SAASG,gBAAkB6E,KAAK1F,KAAKS,QAAQC,SAASK,SAAY,EACtHqJ,YAAeH,SAAW,GAAKvE,KAAK1F,KAAKS,QAAQC,SAASG,gBAAkB6E,KAAK1F,KAAKS,QAAQC,SAASK,SAAY,EAGnHsJ,qBAAsB,EAEtBC,IAAM,GACNC,eAAiB9K,EAAE8C,MACvB9C,EAAE8C,MAAMwD,QAAQ,MAAMM,KAAK,qBAAqBqB,MAAK,SAAS8C,EAAGnD,GAC3D5H,EAAE4H,GAAG,IAAMkD,eAAe,KACxB1E,SAAS0E,eAAe7D,KAAK,eAAiBb,SAASpG,EAAE4H,GAAGX,KAAK,cAAgBb,SAAS0E,eAAe7D,KAAK,aAAeb,SAASpG,EAAE4H,GAAGX,KAAK,iBAClJ4D,IAAIG,KAAKhL,EAAE4H,MAGTxB,SAAS0E,eAAe7D,KAAK,eAAiBb,SAASpG,EAAE4H,GAAGX,KAAK,cAAgBb,SAAS0E,eAAe7D,KAAK,aAAeb,SAASpG,EAAE4H,GAAGX,KAAK,cAEzIb,SAAS0E,eAAe7D,KAAK,gBAAkBb,SAASpG,EAAE4H,GAAGX,KAAK,gBAAkBb,SAASpG,EAAE4H,GAAGX,KAAK,eAAiBb,SAAS0E,eAAe7D,KAAK,iBAD9JgE,UAOFC,MAAQ,GACZA,MAAMF,KAAK5E,SAAS0E,eAAe7D,KAAK,gBACxCiE,MAAMF,KAAK5E,SAAS0E,eAAe7D,KAAK,kBAE/BiB,EAAI,EAAGA,EAAI2C,IAAI5B,OAAQf,IAC1B9B,SAASyE,IAAI3C,GAAGjB,KAAK,gBAAkBb,SAAS0E,eAAe7D,KAAK,gBAAkBb,SAASyE,IAAI3C,GAAGjB,KAAK,gBAAkBb,SAAS0E,eAAe7D,KAAK,cAC5JiE,MAAMF,KAAK5E,SAASyE,IAAI3C,GAAGjB,KAAK,gBAE9Bb,SAASyE,IAAI3C,GAAGjB,KAAK,cAAgBb,SAAS0E,eAAe7D,KAAK,gBAAkBb,SAASyE,IAAI3C,GAAGjB,KAAK,cAAgBb,SAAS0E,eAAe7D,KAAK,cACxJiE,MAAMF,KAAK5E,SAASyE,IAAI3C,GAAGjB,KAAK,eAIpCiE,MAAQjF,KAAKkF,gBAAgBD,QACvBE,MAAK,SAASC,EAAG5D,UACpB4D,EAAI5D,EAAK,GAAK,SAGRS,EAAI,EAAGA,EAAIgD,MAAMjC,OAAQf,IAAK,SACjCoD,YAAc,EACTP,EAAI,EAAGA,EAAIF,IAAI5B,OAAQ8B,IAC1BG,MAAMhD,GAAK9B,SAASyE,IAAIE,GAAG9D,KAAK,gBAAkBiE,MAAMhD,IAAM9B,SAASyE,IAAIE,GAAG9D,KAAK,cACrFqE,eAGCA,YAAc,GAAKA,YAAcV,sBAAgD,IAAxBA,uBAC5DA,oBAAsBU,iBAI1BR,eAAe7D,KAAK,cAAe2D,oBAAsB,GACzDE,eAAe7D,KAAK,eAAgB2D,oBAAsB,GAE1D1C,EAAI2C,IAAI5B,OACDf,KACD9B,SAASyE,IAAI3C,GAAGjB,KAAK,iBAAmBb,SAAS0E,eAAe7D,KAAK,kBACvE6D,eAAe7D,KAAK,eAAgB4D,IAAI3C,GAAGjB,KAAK,qBAIhDsE,UAAY,OACXrD,EAAI,EAAGA,EAAI9B,SAAS0E,eAAe7D,KAAK,iBAAkBiB,IAAK,CAClEqD,UAAUrD,IAAK,MACN6C,EAAI,EAAGA,EAAIF,IAAI5B,OAAQ8B,QACzB,IAAIS,EAAI,EAAGA,EAAIC,OAAOZ,IAAIE,GAAG9D,KAAK,mBAAmByE,MAAM,KAAKzC,OAAQuC,IAAK,CACjEC,OAAOZ,IAAIE,GAAG9D,KAAK,mBAAmByE,MAAM,KAAKF,IAChDtD,IACdqD,UAAUrD,IAAK,QAMvB4C,eAAe7D,KAAK,kBAAmB,GAEvCiB,EAAI,GACuD,GAApD9B,SAAS0E,eAAe7D,KAAK,oBAA0B,KACvC,IAAjBsE,UAAUrD,KACZ4C,eAAe7D,KAAK,iBAAkBiB,GAClC9B,SAAS0E,eAAe7D,KAAK,iBAAmBb,SAAS0E,eAAe7D,KAAK,gBAAkB,EAAI,SACzE,IAArBsE,UAAUrD,EAAI,IACnB4C,eAAe7D,KAAK,iBAAkB6D,eAAe7D,KAAK,kBAAoB,KAAOiB,EAAI,IACzFA,IAINA,QAEsB,IAApBjC,KAAK1F,KAAKG,UACRiL,UAAaF,OAAOX,eAAe7D,KAAK,mBAAmByE,MAAM,KAAK,GAAKzF,KAAK1F,KAAKG,MAAS,IAC9FkL,WAAa,IAAM3F,KAAK1F,KAAKG,WAE7BkL,WAAa,KAAOxF,SAAS0E,eAAe7D,KAAK,iBAAmBwE,OAAOX,eAAe7D,KAAK,mBAAmByE,MAAM,KAAKzC,QAC7H0C,UAAaF,OAAOX,eAAe7D,KAAK,mBAAmByE,MAAM,KAAK,GAAKtF,SAAS0E,eAAe7D,KAAK,iBAAoB,IAEnIvD,QAAQmI,IAAI,YAAc5F,KAAK1F,KAAKG,OACnCuF,KAAK6F,iBAAiBhJ,KAAM4H,SAAUC,YAAagB,UAAWC,gBAIlE3L,SAAS2D,UAAUyG,sBAAwB,eACrCpE,KAAOnD,UACN5C,QAAQ0G,KAAK,gCAAgCqB,MAAK,eACjD8D,EAAI/L,EAAE8C,MAAM8D,KAAK,mBAAmBqC,OACxCjJ,EAAE8C,MAAM8D,KAAK,mBAAmBqB,MAAK,SAASC,OAExCwC,SAAYtE,SAASpG,EAAE8C,MAAMwD,QAAQ,8BAA8B0F,SAAW/F,KAAK1F,KAAKoB,MAAME,SAASP,SAAY,GAAK,EACxHqJ,YAAc1E,KAAK1F,KAAKoB,MAAME,SAASP,SAAW,GAAK,EACvDsK,WAAa,IAAMG,EACnBJ,UAAa,IAAMI,EAAK7D,EAE5BjC,KAAK6F,iBAAiBhJ,KAAM4H,SAAUC,YAAagB,UAAWC,mBAKpE3L,SAAS2D,UAAUkI,iBAAmB,SAAS5F,KAAMwE,SAAUC,YAAagB,UAAWC,YACrF5L,EAAEkG,MAAMe,KAAK,WAAYyD,UACzB1K,EAAEkG,MAAMe,KAAK,cAAe0D,aAC5B3K,EAAEkG,MAAMe,KAAK,YAAa0E,WAC1B3L,EAAEkG,MAAMe,KAAK,aAAc2E,YAE3B5L,EAAEkG,MAAMG,IAAI,CACVI,IAAMiE,SAAY,KAClBnE,OAASoE,YAAe,KACxBhE,KAAMgF,UAAY,IAClBjF,MAAOkF,WAAa,OAIxB3L,SAAS2D,UAAUkB,eAAiB,eAC9B8C,EAAGM,EAAGnG,IAAKb,SAAUC,OAAQ8K,SACrCF,EAAIjJ,KAAKT,OAAO4G,WACPf,EAAI,EAAGA,EAAI6D,EAAG7D,IACjBN,EAAI9E,KAAKT,OAAO6F,GAChBnG,KAAM,EACNb,SAAW4B,KAAKvC,KAAKS,QAAQC,SAASC,SACtCC,OAAS2B,KAAKvC,KAAKS,QAAQC,SAASE,OACpC8K,SAAWnJ,KAAKvC,KAAKS,QAAQC,SAASG,gBACtCpB,EAAE8C,KAAK5C,SAAS0G,KAAK,wBAAwBqB,MAAK,SAASC,EAAGgE,GACxDtE,EAAE2C,OAAUnE,SAASpG,EAAEkM,GAAGjF,KAAK,cAA2B,GAAX/F,SAAgB,IAAO0G,EAAEuE,KAAQ/F,SAASpG,EAAEkM,GAAGjF,KAAK,cAAyB,GAAT9F,OAAc,GAAQ,GAAK8K,SAAYA,SAAW,KACvKlK,IAAMmK,OAGE,IAARnK,UAGGqK,qBACHrK,IACAmG,EACA9H,OAAO0I,KAAKlB,EAAE2C,OAAOlJ,OAAO,KAC5BjB,OAAO0I,KAAKlB,EAAEuE,KAAK9K,OAAO,KAC1BuG,EAAEyE,MACFzE,EAAE0E,QACF1E,EAAEgC,SACF9G,KAAKyJ,sBAAsB3E,EAAEgC,UAC7BxJ,OAAO0I,KAAKlB,EAAE2C,OAAOlJ,OAAOyB,KAAKvC,KAAKS,QAAQC,SAASI,QAAU,MAAQjB,OAAO0I,KAAKlB,EAAEuE,KAAK9K,OAAOyB,KAAKvC,KAAKS,QAAQC,SAASI,QAC9H,CAAC,oBAMTpB,SAAS2D,UAAUiB,iBAAmB,eAChCqD,EAAGN,EAAG7F,IACdgK,EAAIjJ,KAAKR,SAAS2G,WACTf,EAAI,EAAGA,EAAI6D,EAAG7D,OACjBN,EAAI9E,KAAKR,SAAS4F,GAClBnG,KAAM,EACN/B,EAAE8C,KAAK5C,SAAS0G,KAAK,wBAAwBqB,MAAK,SAASuE,EAAGN,GACxD9F,SAAShG,OAAO0I,KAAKlB,EAAEY,MAAMC,QAAQ,OAAOpH,OAAO,OAAS+E,SAASpG,EAAEkM,GAAGjF,KAAK,gBACjFlF,IAAMmK,OAIE,IAARnK,SAEG,CACOe,KAAK2J,wBAAwB7E,EAAEgC,cACvC8C,KAAO5J,KAAKvC,KAAKS,QAAQC,SAASC,SAClCC,OAAS2B,KAAKvC,KAAKS,QAAQC,SAASE,OAASiF,SAAStD,KAAKvC,KAAKS,QAAQC,SAASG,gBAAkB,IACnGuL,MAA0H,IAAhH7J,KAAKvC,KAAKS,QAAQC,SAASG,gBAAkB,GAAMgF,SAAStD,KAAKvC,KAAKS,QAAQC,SAASG,gBAAkB,UAClHgL,qBACHrK,IACAmG,EACA9H,OAAO0I,KAAKlB,EAAEY,MAAMC,QAAQ,OAAOC,IAAIgE,KAAM,KAAKrL,OAAO,KACzDjB,OAAO0I,KAAKlB,EAAEY,MAAMC,QAAQ,OAAOC,IAAIvH,OAAQ,KAAKuH,IAAIiE,MAAO,KAAKtL,OAAO,KAC3EuG,EAAEyE,MACFzE,EAAE0E,QACF1E,EAAEgC,SACF9G,KAAK2J,wBAAwB7E,EAAEgC,UAC/B,GACA,CAAC,iBAAkB,uBAM3B3J,SAAS2D,UAAUwI,qBAAuB,SAASxE,EAAGoE,MAAOzB,MAAO4B,IAAKE,MAAOC,QAAS1C,SAAU/G,MAAO+J,cAAeC,iBACnHvE,GAAKtI,EAAE,QACfkI,EAAI2E,QAAQ5D,OACDf,KACLI,GAAGtE,SAAS6I,QAAQ3E,IAEtBI,GAAGrB,KAAK,aAAc+E,OACtB1D,GAAGrB,KAAK,aAAcsD,OACtBjC,GAAGrB,KAAK,WAAYkF,KACpB7D,GAAGrB,KAAK,aAAcoF,OACtB/D,GAAGrB,KAAK,eAAgBqF,SACxBhE,GAAGrB,KAAK,gBAAiB2C,UACzBtB,GAAGrB,KAAK,aAAcpE,OACtByF,GAAGjC,IAAI,aAAcxD,OACrBwI,EAAIrL,EAAE,MAAO,CACX8M,KAAM,MAERzB,EAAE3D,OAAO1H,EAAE,OAAQ,OACR,eACR2H,KAAK0E,QACRhB,EAAE3D,OAAO1H,EAAE,OAAQ,OACR,6BAGXqL,EAAEzE,KAAK,kBAAkBc,OAAO1H,EAAE,MAAO,OAC9B,eACRsE,KAAKsI,gBACRvB,EAAEzE,KAAK,kBAAkBc,OAAO1H,EAAE,SAClCqL,EAAEzE,KAAK,kBAAkBc,OAAO4E,SAEhChE,GAAGZ,OAAO2D,GACVrL,EAAE4H,GAAGhB,KAAK,MAAMc,OAAOY,KAGzBrI,SAAS2D,UAAUuB,gBAAkB,eAC/B+C,EAAGN,EAAG7F,IACdgK,EAAIjJ,KAAKT,OAAO4G,WACPf,EAAI,EAAGA,EAAI6D,EAAG7D,IACjBN,EAAI9E,KAAKT,OAAO6F,GAChBnG,KAAM,EACN/B,EAAE8C,KAAK5C,SAAS0G,KAAK,8BAA8BqB,MAAK,SAASuE,EAAGN,GAC9DtE,EAAE2C,OAAUnE,SAASpG,EAAEkM,GAAGjF,KAAK,oBAAuBW,EAAEuE,KAAQ/F,SAASpG,EAAEkM,GAAGjF,KAAK,mBACrFlF,IAAMmK,OAGE,IAARnK,UAGGqK,qBACHrK,IACAmG,EACA9H,OAAO0I,KAAKlB,EAAE2C,OAAOlJ,OAAO,KAC5BjB,OAAO0I,KAAKlB,EAAEuE,KAAK9K,OAAO,KAC1BuG,EAAEyE,MACFzE,EAAE0E,QACF1E,EAAEgC,SACF9G,KAAKyJ,sBAAsB3E,EAAEgC,UAC7BxJ,OAAO0I,KAAKlB,EAAE2C,OAAOlJ,OAAOyB,KAAKvC,KAAKoB,MAAMI,IAAIV,QAAU,MAAQjB,OAAO0I,KAAKlB,EAAE2C,OAAOlJ,OAAOyB,KAAKvC,KAAKS,QAAQC,SAASI,QAAU,MAAQjB,OAAO0I,KAAKlB,EAAEuE,KAAK9K,OAAOyB,KAAKvC,KAAKS,QAAQC,SAASI,QAChM,CAAC,oBAMTpB,SAAS2D,UAAUsB,kBAAoB,eACjCgD,EAAGN,EAAG7F,IACdgK,EAAIjJ,KAAKR,SAAS2G,WACTf,EAAI,EAAGA,EAAI6D,EAAG7D,IACjBN,EAAI9E,KAAKR,SAAS4F,GAClBnG,KAAM,EACN/B,EAAE8C,KAAK5C,SAAS0G,KAAK,8BAA8BqB,MAAK,SAASuE,EAAGN,GAC9DtE,EAAEY,MAASpC,SAASpG,EAAEkM,GAAGjF,KAAK,oBAAuBW,EAAEY,MAASpC,SAASpG,EAAEkM,GAAGjF,KAAK,mBACrFlF,IAAMmK,OAGE,IAARnK,UAGGqK,qBACHrK,IACAmG,EACA9H,OAAO0I,KAAKlB,EAAEY,MAAMC,QAAQ,OAAOpH,OAAO,KAC1CjB,OAAO0I,KAAKlB,EAAEY,MAAMgB,MAAM,OAAOnI,OAAO,KACxCuG,EAAEyE,MACFzE,EAAE0E,QACF1E,EAAEgC,SACF9G,KAAK2J,wBAAwB7E,EAAEgC,UAC/BxJ,OAAO0I,KAAKlB,EAAEY,MAAMnH,OAAOyB,KAAKvC,KAAKoB,MAAMI,IAAIV,QAC/C,CAAC,iBAAkB,sBAM3BpB,SAAS2D,UAAUwB,UAAY,WAC7BgC,MAAQ,2EACRA,OAAS,6CACTA,OAAS,8BACTA,OAAS,6BACTA,OAAS,gCACTA,OAAS,+HACTA,OAAS,SACTA,OAAS,2BACTA,OAAS,SACTA,OAAS,SACTA,OAAS,SACTA,OAAS,SACTpH,EAAE8C,KAAK5C,SAASwH,OADhBN,2XAIFnH,SAAS2D,UAAUyB,QAAU,cACvBvC,KAAKvC,KAAKmC,IAAID,OAAQ,KACpBsK,GAAK/M,EAAE,OAAQ,OACR,oCAEX+M,GAAG1G,IAAI,QAAS,QAChB0G,GAAG1G,IAAI,WAAY,YACnB0G,GAAG1G,IAAI,UAAW,GAClB0G,GAAG1G,IAAI,aAAcvD,KAAKvC,KAAKmC,IAAIpB,SAAW,MAAQwB,KAAKvC,KAAKmC,IAAIE,MAAQ,IAAME,KAAKvC,KAAKmC,IAAIG,WAC5F4D,KAAQrG,SAASiB,OAAO,KAAOjB,SAASqI,QAAQ,OAAOC,IAAI5F,KAAKvC,KAAKS,QAAQC,SAASC,SAAU,KAAKG,OAAO,MAAQ,GAAKyB,KAAKvC,KAAKS,QAAQC,SAASG,gBAAkB0B,KAAKvC,KAAKS,QAAQC,SAASK,SAAawB,KAAKvC,KAAKS,QAAQC,SAASK,SAAW,KACxPyL,GAAG1G,IAAI,MAAOI,IAAM,WACfvG,QAAQ0G,KAAK,qCAAuCxG,SAASqI,QAAQ,OAAOpH,OAAO,KAAO,MAAMuF,KAAK,MAAMc,OAAOqF,IACnHjK,KAAKvC,KAAKmC,IAAIC,QAAS,KACrBsD,KAAOnD,KACXkK,aAAY,eACND,GAAK9G,KAAK/F,QAAQ0G,KAAK,mBAAmBqG,UAC1CF,GAAK/M,EAAE,OAAQ,OACR,qCAERqG,IAAI,QAAS,QAChB0G,GAAG1G,IAAI,WAAY,YACnB0G,GAAG1G,IAAI,UAAW,GAClB0G,GAAG1G,IAAI,aAAcJ,KAAK1F,KAAKmC,IAAIpB,SAAW,MAAQ2E,KAAK1F,KAAKmC,IAAIE,MAAQ,IAAMqD,KAAK1F,KAAKmC,IAAIG,WAC5F4D,KAAQrG,SAASiB,OAAO,KAAOjB,SAASqI,QAAQ,OAAOC,IAAIzC,KAAK1F,KAAKS,QAAQC,SAASC,SAAU,KAAKG,OAAO,MAAQ,GAAK4E,KAAK1F,KAAKS,QAAQC,SAASG,gBAAkB6E,KAAK1F,KAAKS,QAAQC,SAASK,SAAa2E,KAAK1F,KAAKS,QAAQC,SAASK,SAAW,EACxPyL,GAAG1G,IAAI,MAAOI,IAAM,MACpBR,KAAK/F,QAAQ0G,KAAK,qCAAuCxG,SAASqI,QAAQ,OAAOpH,OAAO,KAAO,MAAMuF,KAAK,MAAMc,OAAOqF,MACtH,QAKT9M,SAAS2D,UAAU2B,oBAAsB,eACnCU,KAAOnD,UACN5C,QAAQ0G,KAAK,mBAAmBqB,MAAK,eACpC+B,gBACJhK,EAAE8C,MAAMZ,OACN,WACEgE,KAAOlG,EAAE8C,MACTkH,gBAAkBC,YAAW,WACvB/D,KAAK3B,SAAS,oBAChBvE,EAAEiG,KAAK/F,SAASgE,QAAQ,8BAA+B,CACrD+B,KACAC,OAGFlG,EAAEiG,KAAK/F,SAASgE,QAAQ,4BAA6B,CACnD+B,KACAC,SAIHD,KAAK1F,KAAK0B,MAAMC,MAAMC,UAE3B,WACE+H,aAAaF,iBACb9D,KAAOlG,EAAE8C,MACLoD,KAAK3B,SAAS,oBAChBvE,EAAEiG,KAAK/F,SAASgE,QAAQ,8BAA+B,CACrD+B,KACAC,OAGFlG,EAAEiG,KAAK/F,SAASgE,QAAQ,4BAA6B,CACnD+B,KACAC,cASZjG,SAAS2D,UAAU4B,oBAAsB,eACnCS,KAAOnD,UACN5C,QAAQ0G,KAAK,mBAAmBqB,MAAK,WACxCjI,EAAE8C,MAAMqH,OAAM,SAASlI,OACrBA,MAAMiL,iBACNjL,MAAMkL,kBACNjH,KAAOlG,EAAEiC,MAAM4F,QACe,OAA1B3B,KAAKkH,KAAK,aAAyBlH,KAAK3B,SAAS,oBACnD2B,KAAOA,KAAKI,QAAQ,sBAElBJ,KAAK3B,SAAS,oBAChBvE,EAAEiG,KAAK/F,SAASgE,QAAQ,yBAA0B,CAChD+B,KACAC,KACAD,KAAK3D,SAAS8D,SAASF,KAAKe,KAAK,kBAGnCjH,EAAEiG,KAAK/F,SAASgE,QAAQ,uBAAwB,CAC9C+B,KACAC,KACAD,KAAK5D,OAAO+D,SAASF,KAAKe,KAAK,yBAOzChH,SAAS2D,UAAUa,eAAiB,mBAC9BsG,EAAIjI,KAAKT,OAAO4G,OACb8B,KACD3E,SAAShG,OAAO0I,KAAKhG,KAAKT,OAAO0I,GAAGR,OAAOlJ,OAAO,OAASyB,KAAKvC,KAAKS,QAAQC,SAASC,gBACnFX,KAAKS,QAAQC,SAASC,SAAWkF,SAAShG,OAAO0I,KAAKhG,KAAKT,OAAO0I,GAAGR,OAAOlJ,OAAO,QAEtF+E,SAAStD,KAAKT,OAAO0I,GAAGoB,KAAO/F,SAAShG,OAAO0I,KAAKhG,KAAKT,OAAO0I,GAAGoB,KAAK1D,QAAQ,OAAOC,IAAI5F,KAAKvC,KAAKS,QAAQC,SAASE,OAAQ,QAAQE,OAAO,aAC1Id,KAAKS,QAAQC,SAASE,OAASiF,SAAShG,OAAO0I,KAAKhG,KAAKT,OAAO0I,GAAGoB,KAAKkB,QACzEvK,KAAKvC,KAAKS,QAAQC,SAASE,OAAS,SACjCZ,KAAKS,QAAQC,SAASE,WAMnClB,SAAS2D,UAAUoF,YAAc,eAC3BD,KAAO,MACW,OAAlBjG,KAAK0B,WACPuE,KAAKiC,KAAK5E,SAAShG,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeX,OAAO,OAE3C,QAAlByB,KAAK0B,cACF,IAAI0D,EAAI,EAAGA,EAAIpF,KAAKvC,KAAKS,QAAQS,QAAQC,SAASuH,OAAQf,IAC7Da,KAAKiC,KAAK5E,SAAShG,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeyG,QAAQ,QAAQC,IAAI5F,KAAKvC,KAAKS,QAAQS,QAAQC,SAASwG,GAAI,QAAQ7G,OAAO,UAGhH,SAAlByB,KAAK0B,eACH8I,cAAgBlN,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeuL,cACrD/E,KAAOpI,OAAO0I,KAAKhG,KAAKvC,KAAKyB,eAAeyG,QAAQ,aAC/CP,EAAI,EAAGA,EAAIoF,cAAepF,IACjCa,KAAKiC,KAAK5E,SAASoC,KAAKC,QAAQ,OAAOpH,OAAO,OAC9CmH,KAAKE,IAAI,EAAG,eAGTK,MAGT9I,SAAS2D,UAAU6B,gBAAkB,eAC/BQ,KAAOnD,UACN5C,QAAQ0G,KAAK,sBAAsBuD,OAAM,SAASlI,WACjDiE,KAAOlG,EAAEiC,MAAM4F,QACW,WAA1B3B,KAAKkH,KAAK,cACZlH,KAAOA,KAAKI,QAAQ,uBAEtBL,KAAKuH,wBAAwBxN,EAAEkG,MAAMe,KAAK,uBAI9ChH,SAAS2D,UAAU8B,SAAW,eACxBO,KAAOnD,KACXmD,KAAK/F,QAAQ0G,KAAK,oBAAoB6G,MAAM,CAC1CA,MAAO,SAASxL,MAAOyL,WACJ,QAAbA,WAAoC,SAAbA,YAER,QAAbA,UACFA,UAAY,QACU,SAAbA,YACTA,UAAY,QAEdzH,KAAKuH,wBAAwBE,aAGjCC,UAAW,IACXC,gBAAiB,UAIrB3N,SAAS2D,UAAU+B,gBAAkB,eAC/BM,KAAOnD,KAEX9C,EAAE8C,KAAK5C,SAAS0G,KAAK,gBAAgBuD,OAAM,WACzClE,KAAK4H,aAAazH,SAASpG,EAAE8C,MAAM8D,KAAK,QAAQK,KAAK,oBACrDhB,KAAKzC,QAAQ,QACbyC,KAAKpC,UAGP7D,EAAE8C,KAAK5C,SAAS0G,KAAK,gBAAgBuD,OAAM,WACzClE,KAAKzC,QAAQ,SACbyC,KAAKpC,UAGP7D,EAAE8C,KAAK5C,SAAS0G,KAAK,cAAcuD,OAAM,WACvClE,KAAKzC,QAAQ,QACbyC,KAAKpC,UAGP7D,EAAE8C,KAAK5C,SAAS0G,KAAK,cAAcuD,OAAM,WACvClE,KAAK4H,aAAa7N,EAAE8C,MAAMwD,QAAQ,wBAAwBW,KAAK,cAC/DhB,KAAKzC,QAAQ,OACbyC,KAAKpC,WAIT5D,SAAS2D,UAAUgC,mBAAqB,cACjC9C,KAAKvC,KAAKI,oBAGXsF,KAAOnD,KACX9C,EAAE8N,QAAQC,OAAO,WAAWjH,GAAG,WAAW,SAASkH,GAEhC,IAAbA,EAAEC,SAAiBD,EAAEE,SACvBjI,KAAKuH,wBAAwB,QAGd,IAAbQ,EAAEC,SAAiBD,EAAEE,SACvBjI,KAAKuH,wBAAwB,SAGd,IAAbQ,EAAEC,SAAiBD,EAAEE,UACD,QAAlBjI,KAAKzB,YACPyB,KAAKzC,QAAQ,SACbyC,KAAKpC,QAEe,OAAlBoC,KAAKzB,YACPyB,KAAKzC,QAAQ,QACbyC,KAAKpC,SAIQ,IAAbmK,EAAEC,SAAiBD,EAAEE,UACD,QAAlBjI,KAAKzB,YACPyB,KAAKzC,QAAQ,OACbyC,KAAKpC,QAEe,SAAlBoC,KAAKzB,YACPyB,KAAKzC,QAAQ,QACbyC,KAAKpC,cAMb5D,SAAS2D,UAAU4J,wBAA0B,SAASE,eAChDS,KAEkB,OAAlBrL,KAAK0B,YACP2J,KAAO,QAEa,QAAlBrL,KAAK0B,YACP2J,KAAO,QAEa,SAAlBrL,KAAK0B,YACP2J,KAAO,SAEQ,QAAbT,iBACGnN,KAAKyB,cAAgBoE,SAAShG,OAAO0I,KAXzChG,KAWmDvC,KAAKyB,eAAesH,SAAS,EAAG6E,MAAM9M,OAAO,OAElF,SAAbqM,iBACGnN,KAAKyB,cAAgBoE,SAAShG,OAAO0I,KAdzChG,KAcmDvC,KAAKyB,eAAe0G,IAAI,EAAGyF,MAAM9M,OAAO,YAEzFwC,QAGP5D,SAAS2D,UAAUL,YAAc,kBACxBvD,EAAE8N,QAAQpH,QAAU5D,KAAKvC,KAAKK,YAAYG,qBAAuB,SAAW,WAGrFd,SAAS2D,UAAU0D,SAAW,SAAS8G,KAErCA,IAAMA,IAAIC,QADW,oCACa,SAAS7B,EAAGjF,EAAGC,EAAGC,UAC3CF,EAAIA,EAAIC,EAAIA,EAAIC,EAAIA,SAEzB6G,OAAS,4CAA4CC,KAAKH,YACvDE,OAAS,CACd/G,EAAGnB,SAASkI,OAAO,GAAI,IACvB9G,EAAGpB,SAASkI,OAAO,GAAI,IACvB7G,EAAGrB,SAASkI,OAAO,GAAI,KACrB,MAGNrO,SAAS2D,UAAUK,yBAA2B,eACxC8E,KAAOjG,KAAKkG,mBACXwF,cAAgBpI,SAAShG,OAAO0I,KAAKC,KAAK,IAAIN,QAAQ,OAAOpH,OAAO,WACpEoN,YAAcrI,SAAShG,OAAO0I,KAAKC,KAAKA,KAAKE,OAAS,IAAIO,MAAM,OAAOnI,OAAO,OAGrFpB,SAAS2D,UAAU8K,cAAgB,SAASC,OAAQC,WAAYC,oBAElEjH,EADQpF,WAAa,GAErBuJ,EAAI4C,OAAO1F,OACX6F,cAAgB1I,SAAStD,KAAK0L,eAC9BO,YAAc3I,SAAStD,KAAK2L,aAEfvG,EAAI,EAAGA,EAAI6D,EAAG7D,IACrBN,EAAI+G,OAAOzG,GACP9B,SAASwB,EAAEgH,cAAgBE,eAAiB1I,SAASwB,EAAEiH,cAAgBE,aACzEvM,WAAWwI,KAAKpD,EAAEgC,iBAGf9G,KAAKqI,gBAAgB3I,aAG9BvC,SAAS2D,UAAUoL,iBAAmB,SAASpF,SAAU+E,OAAQvM,OAAQS,OACvEa,QAAQmI,IAAI,eAAiBjC,UAC7BlG,QAAQmI,IAAI,aAAeoD,KAAKC,UAAUP,OAAQ,KAAM,IACxDjL,QAAQmI,IAAI,aAAezJ,QAC3BsB,QAAQmI,IAAI,YAAchJ,WACtBsM,WAAaF,KAAKG,MAAMpP,EAAE,4BAA4BiH,KAAK,6BAC/DvD,QAAQmI,IAAI,aAAeoD,KAAKC,UAAUC,WAAY,KAAM,YAExDE,KAAMtE,EACV7C,EAAIiH,WAAWlG,OACRf,QACDiH,WAAWjH,GAAG0B,UAAYA,gBAC5B+E,OAAOW,QAAQ,CACb1F,SAAUA,SACV/G,MAAOsM,WAAWjH,GAAGrF,QAEhBsM,WAAWjH,GAAGrF,UAUpBqF,EAAI,EAAGA,EAAI9F,OAAO6G,OAAQf,IAAK,KAClCmH,MAAO,EACPtE,EAAI4D,OAAO1F,OACJ8B,KACD4D,OAAO5D,GAAGlI,OAAST,OAAO8F,KAC5BmH,MAAO,OAGNA,YACHV,OAAO3D,KAAK,CACVpB,SAAUA,SACV/G,MAAOT,OAAO8F,KAET9F,OAAO8F,UAGXrF,OAGT5C,SAAS2D,UAAU2L,oBAAsB,kBAChCzM,KAAK4L,cAAc5L,KAAKT,OAAQ,QAAS,QAGlDpC,SAAS2D,UAAU6F,0BAA4B,eACzCjH,WAAaM,KAAKyM,2BACjBtM,mBAAsBH,KAAKK,uBAAuB8F,OAAS,EAAKnG,KAAKK,uBAAyB,WAC/F+E,EAAI1F,WAAWyG,OACZf,UACAqE,sBAAsB/J,WAAW0F,KAI1CjI,SAAS2D,UAAU2I,sBAAwB,SAAS3C,iBAC3C9G,KAAKkM,iBAAiBpF,SAAU9G,KAAKG,mBAAoBH,KAAKvC,KAAK6B,OAAOC,OAAQ,YAG3FpC,SAAS2D,UAAU4L,yBAA2B,kBACrC1M,KAAKG,oBAGdhD,SAAS2D,UAAU6L,yBAA2B,SAASC,uBAChDvM,uBAAyBuM,kBAGhCzP,SAAS2D,UAAU+L,sBAAwB,kBAClC7M,KAAK4L,cAAc5L,KAAKR,SAAU,OAAQ,SAGnDrC,SAAS2D,UAAU8F,4BAA8B,eAC3ClH,WAAaM,KAAK6M,6BACjBzM,qBAAwBJ,KAAKM,yBAAyB6F,OAAS,EAAKnG,KAAKM,yBAA2B,WACrG8E,EAAI1F,WAAWyG,OACZf,UACAuE,wBAAwBjK,WAAW0F,KAI5CjI,SAAS2D,UAAU6I,wBAA0B,SAAS7C,iBAC7C9G,KAAKkM,iBAAiBpF,SAAU9G,KAAKI,qBAAsBJ,KAAKvC,KAAK6B,OAAOE,SAAU,YAG/FrC,SAAS2D,UAAUgM,2BAA6B,kBACvC9M,KAAKI,sBAGdjD,SAAS2D,UAAUiM,2BAA6B,SAASH,uBAClDtM,yBAA2BsM,kBAGlCzP,SAAS2D,UAAUkM,eAAiB,kBAC3BhN,KAAKvC,KAAK6B,OAAOC,QAG1BpC,SAAS2D,UAAUb,eAAiB,SAASgN,YACtCxP,KAAK6B,OAAOC,OAASS,KAAKkN,gBAAgBD,OAC3CjN,KAAKvC,KAAK6B,OAAOG,aACdhC,KAAK6B,OAAOC,OAAO+I,MAAK,iBAC3B,GAAM6E,KAAK1N,aAKjBtC,SAAS2D,UAAUsM,iBAAmB,kBAC7BpN,KAAKvC,KAAK6B,OAAOE,UAG1BrC,SAAS2D,UAAUZ,iBAAmB,SAAS+M,YACxCxP,KAAK6B,OAAOE,SAAWQ,KAAKkN,gBAAgBD,OAC7CjN,KAAKvC,KAAK6B,OAAOG,aACdhC,KAAK6B,OAAOE,SAAS8I,MAAK,iBAC7B,GAAM6E,KAAK1N,aAKjBtC,SAAS2D,UAAUuM,UAAY,kBACtBrN,KAAKT,QAGdpC,SAAS2D,UAAUP,UAAY,SAAShB,aACjCA,OAAUA,QAAmB,QAC7BA,OAAO+I,MAAK,SAASC,EAAG5D,UACxB4D,EAAEd,MAAQ9C,EAAE8C,MAAS,GAAK,MAIjCtK,SAAS2D,UAAUwM,UAAY,SAAS/N,aACjCA,OAASS,KAAKT,OAAOgO,OAAOhO,aAC5BA,OAAO+I,MAAK,SAASC,EAAG5D,UACxB4D,EAAEd,MAAQ9C,EAAE8C,MAAS,GAAK,MAIjCtK,SAAS2D,UAAU0M,YAAc,kBACxBxN,KAAKR,UAGdrC,SAAS2D,UAAUN,YAAc,SAAShB,eACnCA,SAAYA,UAAuB,QACnCA,SAAS8I,MAAK,SAASC,EAAG5D,UAC1B4D,EAAEd,MAAQ9C,EAAE8C,MAAS,GAAK,MAIjCtK,SAAS2D,UAAU2M,YAAc,SAASjO,eACnCA,SAAWQ,KAAKR,SAAS+N,OAAO/N,eAChCA,SAAS8I,MAAK,SAASC,EAAG5D,UAC1B4D,EAAEd,MAAQ9C,EAAE8C,MAAS,GAAK,MAIjCtK,SAAS2D,UAAU4M,YAAc,kBACxB1N,KAAKW,UAGdxD,SAAS2D,UAAUQ,gBAAkB,iBAC5B,CAACtB,KAAK0L,cAAe1L,KAAK2L,cAGnCxO,SAAS2D,UAAUS,oBAAsB,eACnCqE,IAAM,KAAQ,SAAa,UAAc,YAC7CA,IAAMA,IAAI5F,KAAK0B,WACR,CACL4B,SAAShG,OAAO0I,KAAKhG,KAAK0L,eAAe9F,IAAI,EAAGA,KAAKrH,OAAO,MAC5D+E,SAAShG,OAAO0I,KAAKhG,KAAK2L,aAAa/F,IAAI,EAAGA,KAAKrH,OAAO,QAK9DpB,SAAS2D,UAAUO,oBAAsB,eACnCsM,IAAM,KAAQ,SAAa,UAAc,YAC7CA,IAAMA,IAAI3N,KAAK0B,WACR,CACL4B,SAAShG,OAAO0I,KAAKhG,KAAK0L,eAAelF,SAAS,EAAGmH,KAAKpP,OAAO,MACjE+E,SAAShG,OAAO0I,KAAKhG,KAAK2L,aAAanF,SAAS,EAAGmH,KAAKpP,OAAO,QAInEpB,SAAS2D,UAAU8M,aAAe,kBACzB5N,KAAKvC,KAAKyB,eAGnB/B,SAAS2D,UAAUiK,aAAe,SAAS8C,gBACpCpQ,KAAKyB,cAAgBoE,SAASuK,YAGrC1Q,SAAS2D,UAAUY,QAAU,kBACpB1B,KAAKvC,KAAKE,MAGnBR,SAAS2D,UAAUJ,QAAU,SAAS/C,MACxB,OAARA,MAAyB,QAARA,MAA0B,SAARA,YAChCF,KAAKE,KAAOA,OAIrBR,SAAS2D,UAAUoM,gBAAkB,SAAS3E,GAC5CA,EAAIA,EAAEgF,aACD,IAAInI,EAAI,EAAGA,EAAImD,EAAEpC,SAAUf,MACzB,IAAI6C,EAAI7C,EAAI,EAAG6C,EAAIM,EAAEpC,SAAU8B,EAC9BM,EAAEnD,KAAOmD,EAAEN,IACbM,EAAEuF,OAAO7F,IAAK,UAIbM,GAGTpL,SAAS2D,UAAUuH,gBAAkB,SAASE,GAC5CA,EAAIA,EAAEgF,aACD,IAAInI,EAAI,EAAGA,EAAImD,EAAEpC,SAAUf,MACzB,IAAI6C,EAAI7C,EAAI,EAAG6C,EAAIM,EAAEpC,SAAU8B,EAC9BM,EAAEnD,KAAOmD,EAAEN,IACtBM,EAAEuF,OAAO7F,IAAK,UAIJM,GAGTpL,SAAS2D,UAAUiF,kBAAoB,SAASgI,UACvCA,EAAEC,OAAO,GAAGC,cAAgBF,EAAEG,MAAM,QAezCC,gBAZAC,iBAAmB,GAGvBrR,OAAOsR,OAAOtR,OAAOuR,GAAI,CACvBnR,SAAU,SAASoR,aACbC,EAAI,IAAIrR,SAASD,EAAE8C,WAAoBtB,IAAZ6P,QAAyB,GAAKA,gBAC7DH,iBAAiBlG,KAAKsG,GACfA,SAiBPC,gBAVJzD,OAAO0D,iBAAiB,qBAAqB,WAC3CtH,aAAa+G,iBACbA,gBAAkBhH,YAAW,WAC3BiH,iBAAiBO,SAAQ,SAASC,KAChCA,IAAI7N,YALG,QAabiK,OAAO0D,iBAAiB,UAAU,WAChCtH,aAAaqH,iBACbA,gBAAkBtH,YAAW,WAC3BiH,iBAAiBO,SAAQ,SAASC,KACP,WAArBA,IAAInO,eACNmO,IAAI7N,YANC"}